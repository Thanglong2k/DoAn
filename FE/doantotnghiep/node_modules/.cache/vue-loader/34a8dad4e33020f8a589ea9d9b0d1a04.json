{"remainingRequest":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\views\\product-cart\\product-info.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\views\\product-cart\\product-info.vue","mtime":1652530040706},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge21hcE11dGF0aW9uc30gZnJvbSAndnVleCcNCmV4cG9ydCBkZWZhdWx0IHsNCiAgcHJvcHM6IHsNCiAgICBkYXRhSXRlbTogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdDogKCkgPT4ge30sDQogICAgfSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc3JjOiAiaHR0cHM6Ly9jdWJlLmVsZW1lY2RuLmNvbS82Lzk0LzRkM2VhNTNjMDg0YmFkNjkzMWE1NmQ1MTU4YTQ4anBlZy5qcGVnIiwNCiAgICAgIG51bTogdGhpcy5kYXRhSXRlbS5Qcm9kdWN0QXR0cmlidXRlc1swXS5RdWFudGl0eSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDp7DQogICAgaXNTYWxlKCl7DQogICAgICBjb25zdCBtZT10aGlzDQogICAgICByZXR1cm4gbWUuZGF0YUl0ZW0uUHJvZHVjdEF0dHJpYnV0ZXNbMF0uUHJvbW90aW9uUHJpY2UhPT0wPyB0cnVlOiBmYWxzZQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC4uLm1hcE11dGF0aW9ucygnY2FydCcsWydzZXRQcm9kdWN0Q2FydExlbmd0aCcsJ3NldFByb2R1Y3RDYXJ0J10pLA0KICAgIC8qKg0KICAgICAqIFRoYXkgxJHhu5VpIHPhu5EgbMaw4bujbmcNCiAgICAgKi8NCiAgICBoYW5kbGVDaGFuZ2UodmFsdWUpIHsNCiAgICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICAgIGNvbnN0IGNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwcm9kdWN0Q2FydCIpKTsNCiAgICAgIC8vbuG6v3UgZ2nhuqNtIHPhu5EgbMaw4bujbmcgduG7gSAwIHRow6wgeMOzYSBraOG7j2kgZ2nhu48NCiAgICAgIGlmICh2YWx1ZSA9PT0gMCkgew0KICAgICAgICBjb25zdCBuZXdDYXJ0ID0gY2FydC5maWx0ZXIoKGl0ZW0pID0+IHsNCiAgICAgICAgICByZXR1cm4gaXRlbS5Qcm9kdWN0SUQgIT09IG1lLmRhdGFJdGVtLlByb2R1Y3RJRDsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInByb2R1Y3RDYXJ0IiwgSlNPTi5zdHJpbmdpZnkobmV3Q2FydCkpOw0KICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicHJvZHVjdENhcnRMZW5ndGgiLCBuZXdDYXJ0Lmxlbmd0aCk7DQogICAgICAgIG1lLnNldFByb2R1Y3RDYXJ0TGVuZ3RoKG5ld0NhcnQubGVuZ3RoKQ0KICAgICAgICBtZS5zZXRQcm9kdWN0Q2FydChuZXdDYXJ0KQ0KICAgICAgICBtZS4kcm91dGVyLmdvKCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zdCBuZXdDYXJ0ID0gY2FydC5tYXAoKGl0ZW0pID0+IHsNCiAgICAgICAgICBpZiAoaXRlbS5Qcm9kdWN0SUQgPT09IG1lLmRhdGFJdGVtLlByb2R1Y3RJRCkgew0KICAgICAgICAgICAgaXRlbS5Qcm9kdWN0QXR0cmlidXRlc1swXS5RdWFudGl0eSA9IHZhbHVlOw0KICAgICAgICAgIH0NCiAgICAgICAgICByZXR1cm4gaXRlbTsNCiAgICAgICAgfSk7DQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJwcm9kdWN0Q2FydCIsIEpTT04uc3RyaW5naWZ5KG5ld0NhcnQpKTsNCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInByb2R1Y3RDYXJ0TGVuZ3RoIiwgbmV3Q2FydC5sZW5ndGgpOw0KICAgICAgICAgbWUuc2V0UHJvZHVjdENhcnRMZW5ndGgobmV3Q2FydC5sZW5ndGgpDQogICAgICAgIG1lLnNldFByb2R1Y3RDYXJ0KG5ld0NhcnQpDQogICAgICB9DQogICAgICANCiAgICB9LA0KICAgIC8qKg0KICAgICAqIFjDs2Egc+G6o24gcGjhuqltIHRyb25nIGdp4buPDQogICAgICovDQogICAgZGVsZXRlUHJvZHVjdENhcnQoKSB7DQogICAgICBjb25zdCBtZSA9IHRoaXM7DQogICAgICBjb25zdCBjYXJ0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicHJvZHVjdENhcnQiKSk7DQogICAgICBjb25zdCBuZXdDYXJ0ID0gY2FydC5maWx0ZXIoKGl0ZW0pID0+IHsNCiAgICAgICAgcmV0dXJuIGl0ZW0uUHJvZHVjdEF0dHJpYnV0ZXNbMF0uUHJvZHVjdEF0dHJpYnV0ZUlEICE9PSBtZS5kYXRhSXRlbS5Qcm9kdWN0QXR0cmlidXRlc1swXS5Qcm9kdWN0QXR0cmlidXRlSUQ7DQogICAgICB9KTsNCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJwcm9kdWN0Q2FydCIsIEpTT04uc3RyaW5naWZ5KG5ld0NhcnQpKTsNCiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJwcm9kdWN0Q2FydExlbmd0aCIsIG5ld0NhcnQubGVuZ3RoKTsNCiAgICAgICBtZS5zZXRQcm9kdWN0Q2FydExlbmd0aChuZXdDYXJ0Lmxlbmd0aCkNCiAgICAgICAgbWUuc2V0UHJvZHVjdENhcnQobmV3Q2FydCkNCiAgICAgIG1lLiRyb3V0ZXIuZ28oKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["product-info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"product-info.vue","sourceRoot":"src/components/client/views/product-cart","sourcesContent":["<template>\r\n  <div class=\"product-info tw-flex tw-justify-between tw-mt-4 tw-pb-4\">\r\n    <div class=\"image tw-w-20 tw-h-20\">\r\n      <el-image :src=\"dataItem.Image\" fit=\"contain\">\r\n        <div slot=\"placeholder\" class=\"image-slot\">\r\n          Loading<span class=\"dot\">...</span>\r\n        </div>\r\n      </el-image>\r\n    </div>\r\n    <div class=\"product tw-ml-4 tw-flex-1\">\r\n      <div class=\"product-name\">{{ dataItem.ProductName + \" \" + dataItem.ProductAttributes[0].Memory+\"GB\"}}</div>\r\n      <div class=\"product-color\">đỏ</div>\r\n    </div>\r\n    <div class=\"quantity\">\r\n      <el-input-number\r\n        class=\"input-number\"\r\n        v-model=\"num\"\r\n        @change=\"handleChange\"\r\n        :min=\"0\"\r\n        :max=\"10\"\r\n      ></el-input-number>\r\n    </div>\r\n    <div class=\"price tw-w-40 tw-ml-4 tw-px-4 tw-text-right\">\r\n      <div class=\"promotion-price tw-text-red-400 tw-font-semibold\" v-if=\"isSale\">\r\n        {{ $commonFn.formatMoney(dataItem.ProductAttributes[0].PromotionPrice.toString()) }}\r\n      </div>\r\n      <div\r\n        class=\"root-price\"\r\n        :class=\"[\r\n          { 'tw-text-gray-300 tw-line-through': isSale },\r\n          { 'tw-text-red-400 tw-font-semibold': !isSale },\r\n        ]\"\r\n      >\r\n        {{ $commonFn.formatMoney(dataItem.ProductAttributes[0].Price.toString()) }}\r\n      </div>\r\n    </div>\r\n    <el-button\r\n      class=\"delete-btn tw-h-8 tw-w-7\"\r\n      icon=\"el-icon-delete\"\r\n      @click=\"deleteProductCart\"\r\n    ></el-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapMutations} from 'vuex'\r\nexport default {\r\n  props: {\r\n    dataItem: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      src: \"https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg\",\r\n      num: this.dataItem.ProductAttributes[0].Quantity,\r\n    };\r\n  },\r\n  computed:{\r\n    isSale(){\r\n      const me=this\r\n      return me.dataItem.ProductAttributes[0].PromotionPrice!==0? true: false\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations('cart',['setProductCartLength','setProductCart']),\r\n    /**\r\n     * Thay đổi số lượng\r\n     */\r\n    handleChange(value) {\r\n      const me = this;\r\n      const cart = JSON.parse(localStorage.getItem(\"productCart\"));\r\n      //nếu giảm số lượng về 0 thì xóa khỏi giỏ\r\n      if (value === 0) {\r\n        const newCart = cart.filter((item) => {\r\n          return item.ProductID !== me.dataItem.ProductID;\r\n        });\r\n\r\n        localStorage.setItem(\"productCart\", JSON.stringify(newCart));\r\n        localStorage.setItem(\"productCartLength\", newCart.length);\r\n        me.setProductCartLength(newCart.length)\r\n        me.setProductCart(newCart)\r\n        me.$router.go();\r\n      } else {\r\n        const newCart = cart.map((item) => {\r\n          if (item.ProductID === me.dataItem.ProductID) {\r\n            item.ProductAttributes[0].Quantity = value;\r\n          }\r\n          return item;\r\n        });\r\n        localStorage.setItem(\"productCart\", JSON.stringify(newCart));\r\n        localStorage.setItem(\"productCartLength\", newCart.length);\r\n         me.setProductCartLength(newCart.length)\r\n        me.setProductCart(newCart)\r\n      }\r\n      \r\n    },\r\n    /**\r\n     * Xóa sản phẩm trong giỏ\r\n     */\r\n    deleteProductCart() {\r\n      const me = this;\r\n      const cart = JSON.parse(localStorage.getItem(\"productCart\"));\r\n      const newCart = cart.filter((item) => {\r\n        return item.ProductAttributes[0].ProductAttributeID !== me.dataItem.ProductAttributes[0].ProductAttributeID;\r\n      });\r\n      localStorage.setItem(\"productCart\", JSON.stringify(newCart));\r\n      localStorage.setItem(\"productCartLength\", newCart.length);\r\n       me.setProductCartLength(newCart.length)\r\n        me.setProductCart(newCart)\r\n      me.$router.go();\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.delete-btn {\r\n  @apply tw-bg-red-400 tw-text-white tw-p-0 !important;\r\n}\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n::v-deep {\r\n  .el-input-number {\r\n    line-height: 20px;\r\n    .el-input-number__decrease,\r\n    .el-input-number__increase {\r\n      width: 20px;\r\n    }\r\n    .el-input__inner {\r\n      height: 22px;\r\n      padding-left: 0px;\r\n      padding-right: 0px;\r\n    }\r\n  }\r\n}\r\n\r\n.input-number {\r\n  width: 100px !important ;\r\n}\r\n.product-info {\r\n  border-bottom: 1px solid rgba(206, 207, 206, 0.877);\r\n}\r\n</style>"]}]}