{"remainingRequest":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\views\\product-detail\\review\\review.vue?vue&type=style&index=0&id=b5422c98&scoped=true&lang=css&","dependencies":[{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\views\\product-detail\\review\\review.vue","mtime":1652504139511},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5zZW5kLWJ0biB7DQogIEBhcHBseSB0dy1iZy1yZWQtNTAwIHR3LXRleHQtd2hpdGUgdHctYWJzb2x1dGUgdHctcmlnaHQtNCB0dy10b3AtNCAhaW1wb3J0YW50Ow0KfQ0KLnJhdGluZy1idG4gew0KICBAYXBwbHkgdHctYmctcmVkLTUwMCB0dy10ZXh0LXdoaXRlICFpbXBvcnRhbnQ7DQp9DQo="},{"version":3,"sources":["review.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiRA;AACA;AACA;AACA;AACA;AACA","file":"review.vue","sourceRoot":"src/components/client/views/product-detail/review","sourcesContent":["<template>\r\n  <div class=\"review tw-mt-4\">\r\n    <area-card :title=\"$t('Rating.ProductReview', { number: reviewTotal })\">\r\n      <div class=\"review-info tw-flex tw-justify-around tw-w-full\">\r\n        <div class=\"average-rating\">\r\n          <div class=\"average-rating-title\">\r\n            {{ $t(\"DetailProduct.AvgReview\") }}\r\n          </div>\r\n          <div class=\"rating-rate\">{{ product.Rate }}/5</div>\r\n          <el-rate v-model=\"product.Rate\" disabled :allow-half=\"true\"></el-rate>\r\n        </div>\r\n        <div class=\"table-rating\">\r\n          <ReviewSliders :product=\"product\" />\r\n        </div>\r\n        <div class=\"writing-rating\">\r\n          <div class=\"question\">\r\n            {{ $t(\"DetailProduct.UsedThisProductYet\") }}\r\n          </div>\r\n          <v-btn @click=\"onShowRating\" class=\"rating-btn\">{{\r\n            $t(\"DetailProduct.SendYourReview\")\r\n          }}</v-btn>\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"\r\n          area-rating\r\n          tw-w-full tw-flex tw-items-start tw-mt-6 tw-p-6 tw-bg-gray-100\r\n        \"\r\n        v-if=\"showRating\"\r\n      >\r\n        <div class=\"product-rating tw-w-2/5\">\r\n          <div class=\"rating-question\">\r\n            {{ $t(\"DetailProduct.HowManyStarsDoYouGiveThisProduct\") }}\r\n          </div>\r\n          <el-rate\r\n            v-model=\"rating\"\r\n            :texts=\"[\r\n              $t('Rating.DontLike'),\r\n              $t('Rating.Possible'),\r\n              $t('Rating.Ordinary'),\r\n              $t('Rating.Glad'),\r\n              $t('Rating.Wonderful'),\r\n            ]\"\r\n            show-text\r\n          ></el-rate>\r\n          <span class=\"text-error\" v-if=\"showReviewError\"\r\n            >Vui lòng chọn đánh giá của bạn về sản phẩm này</span\r\n          >\r\n        </div>\r\n        <div class=\"area-writing tw-flex-1 tw-ml-6 tw-relative\">\r\n          <!-- <v-textarea class=\"text-area\" aria-placeholder=\"Bạn có lời khuyên gì cho cửa hàng\" rows=\"3\"></v-textarea> -->\r\n\r\n          <el-input\r\n            type=\"textarea\"\r\n            :autosize=\"{ minRows: 3 }\"\r\n            :placeholder=\"$t('DetailProduct.WhatAdviceDoYouHaveForTheStore')\"\r\n            v-model=\"content\"\r\n          >\r\n          </el-input>\r\n          <v-btn @click=\"onSendReview\" class=\"send-btn\">{{\r\n            $t(\"DetailProduct.SendReview\")\r\n          }}</v-btn>\r\n          <span class=\"text-error\" v-if=\"showCommentError\"\r\n            >Mời viết bình luận (tối thiểu 3 kí tự)</span\r\n          >\r\n        </div>\r\n      </div>\r\n      <!-- Danh sách đánh giá của khách hàng -->\r\n      <div class=\"review-result tw-mt-6\">\r\n        <div class=\"review-list\">\r\n          <div\r\n            class=\"review-item tw-flex tw-mb-4\"\r\n            v-for=\"item in evaluations\"\r\n            :key=\"item.EvaluationID\"\r\n          >\r\n            <div class=\"avatar-area tw-w-16 tw-h-16 tw-mr-4\">\r\n              <el-avatar shape=\"square\">\r\n                {{ nameAvatar(item.CustomerName) }}\r\n              </el-avatar>\r\n            </div>\r\n            <div class=\"review-info tw-flex-1\">\r\n              <div class=\"user-name tw-font-semibold\">\r\n                {{ item.CustomerName }}\r\n              </div>\r\n              <div class=\"rating tw-flex\">\r\n                <el-rate v-model=\"item.Rate\" disabled></el-rate>\r\n                <div class=\"rating-time tw-text-sm tw-text-gray-400\">\r\n                  12 giờ trước\r\n                </div>\r\n              </div>\r\n              <div class=\"content\">\r\n                {{ item.Content }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"panigation\">\r\n          <v-pagination\r\n            v-if=\"pageTotal > 1\"\r\n            v-model=\"pageIndex\"\r\n            :length=\"pageTotal\"\r\n            :total-visible=\"7\"\r\n          ></v-pagination>\r\n        </div>\r\n      </div>\r\n    </area-card>\r\n    <ReviewCustomerInfoPopup\r\n      ref=\"popup\"\r\n      @saveReview=\"saveReview\"\r\n      title=\"Hoàn thành gửi đánh giá\"\r\n      :type=\"$enumeration.CustomerInfoPopup.Review\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ReviewCustomerInfoPopup from \"../popup/customer-info-popup.vue\";\r\nimport ReviewSliders from \"./review-sliders.vue\";\r\nimport AreaCard from \"@/components/controls/area-card\";\r\nimport { mapState, mapActions, mapMutations } from \"vuex\";\r\nexport default {\r\n  components: {\r\n    AreaCard,\r\n    ReviewCustomerInfoPopup,\r\n    ReviewSliders,\r\n  },\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      showRating: false,\r\n      model: 4,\r\n      rating: 0,\r\n\r\n      content: \"\",\r\n      showReviewError: false,\r\n      showCommentError: false,\r\n      pageIndex: 1,\r\n      pageSize: 5,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(\"evaluation\", [\"evaluations\",\"pageTotal\",\"reviewTotal\"]),\r\n    ...mapState(\"order\", [\r\n      \"isCheckCustomerPurchasedProduct\",\r\n      \"customerIDPurchased\",\r\n    ]),\r\n  },\r\n  created() {\r\n    const me = this;\r\n    me.getEvaluationOfProduct(1);\r\n  },\r\n  methods: {\r\n    ...mapActions(\"evaluation\", [\"getEvaluationByProductID\"]),\r\n    ...mapMutations(\"evaluation\", [\"setValueRating\", \"setContentRating\"]),\r\n    ...mapActions(\"order\", [\"checkCustomerPurchasedProduct\"]),\r\n    ...mapActions(\"evaluation\", [\"insertReviewOfProuct\"]),\r\n    /**\r\n     * Hiển thị đánh giá\r\n     */\r\n    onShowRating() {\r\n      const me = this;\r\n      me.showRating = true;\r\n    },\r\n    /**\r\n     * Gửi đánh giá\r\n     */\r\n    onSendReview() {\r\n      const me = this;\r\n      if (me.rating === 0) {\r\n        me.showReviewError = true;\r\n      }\r\n      if (me.content.length < 3) {\r\n        me.showCommentError = true;\r\n      }\r\n      if (!me.showReviewError && !me.showCommentError) {\r\n        me.setValueRating(me.rating);\r\n        me.setContentRating(me.content);\r\n        me.$refs.popup.setModel(true);\r\n      }\r\n    },\r\n    /**\r\n     * Lưu đánh giá\r\n     */\r\n    async saveReview(modelForm){\r\n      const me=this\r\n      const paramCheck = {\r\n            phoneNumber: modelForm.PhoneNumber,\r\n            productAttributeID: me.product.ProductAttributeID,\r\n          };\r\n          await me.checkCustomerPurchasedProduct(paramCheck);\r\n          if (!me.isCheckCustomerPurchasedProduct) {\r\n            me.$alert(\"Bạn chưa mua sản phẩm này!\", \"Cảnh báo\", {\r\n              confirmButtonText: \"OK\",\r\n            });\r\n          } else {\r\n            const param = {\r\n              FullName: modelForm.FullName,\r\n              PhoneNumber: modelForm.PhoneNumber,\r\n              Email: modelForm.Email,\r\n            };\r\n            const paramEvaluation = {\r\n              ProductAttributeID: me.product.ProductAttributeID,\r\n              CustomerID: me.customerIDPurchased,\r\n              Rate: me.rating,\r\n              Content: me.content\r\n            };\r\n            const h = this.$createElement;\r\n            me.insertReviewOfProuct(paramEvaluation).then(res=>{\r\n              this.$notify({\r\n                title: me.$t(\"Notify.Success\"),\r\n                message: h(\r\n                  \"i\",\r\n                  { style: \"color: teal\" },\r\n                  me.$t(\"Notify.InsertSuccess\",{object:'đánh giá'})\r\n                ),\r\n                type: \"success\",\r\n              });\r\n            }).catch(e=>{\r\n              this.$notify.error({\r\n              title: me.$t(\"Notify.Error\"),\r\n              message: h(\r\n                \"i\",\r\n                { style: \"color: teal\" },\r\n                me.$t(\"Notify.HasError\")\r\n              ),\r\n            });\r\n            })\r\n          }\r\n    },\r\n    //set avatar đánh giá cho người dùng\r\n    nameAvatar(name) {\r\n      return this.$commonFn.takeTheFirstLetter(name);\r\n    },\r\n    /**\r\n     * Lấy danh sách đánh giá của sản phẩm\r\n     */\r\n    getEvaluationOfProduct(pageIndex) {\r\n      const me = this;\r\n      const params = {\r\n        productAttributeID: me.product.ProductAttributeID,\r\n        pageindex: pageIndex,\r\n        pageSize: me.pageSize,\r\n      };\r\n      me.getEvaluationByProductID(params);\r\n    },\r\n  },\r\n  watch: {\r\n    rating(newVal) {\r\n      const me = this;\r\n      if (newVal != 0) {\r\n        me.showReviewError = false;\r\n      }\r\n    },\r\n    content(newVal) {\r\n      const me = this;\r\n      if (newVal.length >= 3) {\r\n        me.showCommentError = false;\r\n      }\r\n    },\r\n    pageIndex() {\r\n      const me = this;\r\n      me.getEvaluationOfProduct(me.pageIndex);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.send-btn {\r\n  @apply tw-bg-red-500 tw-text-white tw-absolute tw-right-4 tw-top-4 !important;\r\n}\r\n.rating-btn {\r\n  @apply tw-bg-red-500 tw-text-white !important;\r\n}\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n@import \"@/styles/mixins/mixins.scss\";\r\n.v-text-area text-area {\r\n  border: $default-border;\r\n}\r\n\r\n::v-deep {\r\n  .rating {\r\n    .el-rate {\r\n      .el-rate__item {\r\n        .el-rate__icon {\r\n          font-size: 14px !important;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .el-textarea__inner {\r\n    padding-right: 168px;\r\n  }\r\n}\r\n.area-rating {\r\n  .text-error {\r\n    color: red;\r\n    font-size: 13px;\r\n  }\r\n}\r\n.review-result {\r\n  .review-list {\r\n    .review-item {\r\n      .avatar-area {\r\n        .el-avatar {\r\n          height: 100%;\r\n          width: 100%;\r\n          line-height: 64px;\r\n          font-size: 20px;\r\n        }\r\n      }\r\n      .review-info {\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}