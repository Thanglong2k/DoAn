{"remainingRequest":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\views\\purchase-history\\purchased-orders.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\views\\purchase-history\\purchased-orders.vue","mtime":1655698926566},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOw0KZXhwb3J0IGRlZmF1bHQgew0KcHJvcHM6ew0KICAgIHR5cGU6ew0KICAgICAgdHlwZTpOdW1iZXIsDQogICAgICBkZWZhdWx0OjANCiAgICB9DQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFjdGl2ZVRhYjogLTEsDQogICAgICB0YWJzOiBbDQogICAgICAgICJU4bqldCBj4bqjIiwNCiAgICAgICAgIkNo4budIHjDoWMgbmjhuq1uIiwNCiAgICAgICAgIkNo4budIGzhuqV5IGjDoG5nIiwNCiAgICAgICAgIsSQYW5nIGdpYW8gaMOgbmciLA0KICAgICAgICAiVGjDoG5oIGPDtG5nIiwNCiAgICAgICAgIsSQw6MgaOG7p3kiLA0KICAgICAgXSwNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC4uLm1hcFN0YXRlKCJjdXN0b21lciIsIFsiY3VzdG9tZXIiXSksDQogICAgLi4ubWFwU3RhdGUoIm9yZGVyIiwgWyJwdXJjaGFzZWRIaXN0b3J5IiwncGhvbmVOdW1iZXInXSksDQogIH0sDQogIG1ldGhvZHM6ew0KICAgIC4uLm1hcEFjdGlvbnMoJ29yZGVyJyxbJ2dldEZvbGxvd09yZGVyJywndXBkYXRlT3JkZXInXSksDQogICAgc2VsZWN0U3RhdHVzKHN0YXR1cyl7DQogICAgICBjb25zdCBtZT10aGlzDQogICAgICBtZS5hY3RpdmVUYWI9c3RhdHVzDQogICAgICBtZS5nZXRGb2xsb3dPcmRlcih7cGhvbmVOdW1iZXI6bWUucGhvbmVOdW1iZXIsc3RhdHVzOnN0YXR1c30pDQogICAgfSwNCiAgICBvbkNhbmNlbE9yZGVyKG9yZGVyKXsNCiAgICAgIGNvbnN0IG1lPXRoaXMNCiAgICAgIGNvbnN0IG5ld09yZGVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvcmRlcikpOw0KICAgICAgbmV3T3JkZXIuT3JkZXJTdGF0dXMgPSBtZS4kZW51bWVyYXRpb24uT3JkZXJTdGF0dXMuQ2FuY2VsbGVkOw0KICAgICAgY29uc3QgcGFyYW1zID0gew0KICAgICAgICBpZDogbmV3T3JkZXIuT3JkZXJJRCwNCiAgICAgICAgcGFyYW1zOiBuZXdPcmRlciwNCiAgICAgIH07DQogICAgICBjb25zdCBoID0gdGhpcy4kY3JlYXRlRWxlbWVudDsNCiAgICAgIG1lLnVwZGF0ZU9yZGVyKHBhcmFtcykNCiAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gew0KICAgICAgICAgIGlmIChyZXMpIHsNCiAgICAgICAgICAgIG1lLiRub3RpZnkoew0KICAgICAgICAgICAgICB0aXRsZTogbWUuJHQoIk5vdGlmeS5TdWNjZXNzIiksDQogICAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwNCiAgICAgICAgICAgICAgbWVzc2FnZTogaCgNCiAgICAgICAgICAgICAgICAiaSIsDQogICAgICAgICAgICAgICAgeyBzdHlsZTogImNvbG9yOiB0ZWFsIiB9LA0KICAgICAgICAgICAgICAgIG1lLiR0KCJOb3RpZnkuQ2FuY2VsT3JkZXJTdWNjZXNzIiwgeyBvcmRlcklEOiBuZXdPcmRlci5PcmRlcklEIH0pDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICksDQogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIg0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBhd2FpdCBtZS5nZXRGb2xsb3dPcmRlcih7cGhvbmVOdW1iZXI6bWUucGhvbmVOdW1iZXIsc3RhdHVzOm1lLmFjdGl2ZVRhYn0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIG1lLiRub3RpZnkoew0KICAgICAgICAgICAgICB0aXRsZTogbWUuJHQoIk5vdGlmeS5FcnJvciIpLA0KICAgICAgICAgICAgICBtZXNzYWdlOiBoKA0KICAgICAgICAgICAgICAgICJpIiwNCiAgICAgICAgICAgICAgICB7IHN0eWxlOiAiY29sb3I6IHRlYWwiIH0sDQogICAgICAgICAgICAgICAgbWUuJHQoIk5vdGlmeS5IYXNFcnJvciIpDQogICAgICAgICAgICAgICksDQogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZSkgPT4gew0KICAgICAgICAgIG1lLiRub3RpZnkoew0KICAgICAgICAgICAgdGl0bGU6IG1lLiR0KCJOb3RpZnkuRXJyb3IiKSwNCiAgICAgICAgICAgIG1lc3NhZ2U6IGgoImkiLCB7IHN0eWxlOiAiY29sb3I6IHRlYWwiIH0sIG1lLiR0KCJOb3RpZnkuSGFzRXJyb3IiKSksDQogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9KTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["purchased-orders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"purchased-orders.vue","sourceRoot":"src/components/client/views/purchase-history","sourcesContent":["<template>\r\n  <div class=\"purchased-orders tw-bg-white\" v-if=\"customer\">\r\n    <div class=\"header\">\r\n      Chào {{ customer.Gender === $enumeration.Gender.Male ? \"anh\" : \"chị\" }}\r\n      {{ customer.CustomerName }}, {{ customer.PhoneNumber }}\r\n    </div>\r\n    <div class=\"order-status tw-flex\" v-if=\"type===$enumeration.TypeLookupOrder.FollowOrder\">\r\n      <el-button\r\n        v-for=\"(tab, index) in tabs\"\r\n        :key=\"index\"\r\n        :class=\"{ 'is-active': activeTab === index - 1 }\"\r\n        @click=\"selectStatus(index-1)\"\r\n        >{{ tab }}</el-button\r\n      >\r\n    </div>\r\n    <div class=\"order-list\" v-if=\"purchasedHistory.length>0\">\r\n      <div class=\"order-header tw-bg-gray-100 tw-flex\">\r\n        <div class=\"order-column border-right tw-p-4 tw-w-14\">STT</div>\r\n        <div class=\"order-column tw-flex-1 tw-p-4 tw-text-center\">Đơn hàng</div>\r\n      </div>\r\n      <div\r\n        class=\"order-items\"\r\n        v-for=\"(item, index) in purchasedHistory\"\r\n        :key=\"index\"\r\n      >\r\n        <div class=\"order-row tw-flex\">\r\n          <div class=\"order-column border-right tw-p-4 tw-w-14\">\r\n            {{ index + 1 }}\r\n          </div>\r\n          <div\r\n            class=\"order-column border-right tw-p-4 tw-flex-1 tw-text-center\"\r\n          >\r\n            <div\r\n              class=\"product tw-py-2 tw-flex\"\r\n              v-for=\"(orderDetail, index1) in item.OrderDetails\"\r\n              :key=\"index1\"\r\n            >\r\n              <div class=\"name tw-flex-1\">\r\n                {{\r\n                  orderDetail.Product.ProductName +\r\n                  \" \" +\r\n                  orderDetail.ProductAttribute.Memory +\r\n                  \"GB\"\r\n                }}\r\n              </div>\r\n              <div class=\"image tw-w-32\">\r\n                <img :src=\"orderDetail.Product.Avatar\" />\r\n              </div>\r\n              <div class=\"quantity tw-w-40\">\r\n                Số lượng : {{ orderDetail.OrderDetail.Quantity }}\r\n              </div>\r\n              <div class=\"price tw-w-56\">\r\n                Giá :\r\n                {{\r\n                  $commonFn.formatMoney2(\r\n                    orderDetail.OrderDetail.UnitPrice.toString()\r\n                  )\r\n                }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"order-column border-right tw-w-32 tw-text-center tw-p-4\">\r\n            Tổng tiền:\r\n            {{ $commonFn.formatMoney2(item.Order.TotalPrice.toString()) }}\r\n          </div>\r\n          <div class=\"order-column tw-w-32 tw-text-center tw-p-4\" v-if=\"activeTab===$enumeration.OrderStatus.WaitConfirm || activeTab===-1\">\r\n            <el-button class=\"cacel-btn\" @click=\"onCancelOrder(item.Order)\" v-if=\"item.Order.OrderStatus===$enumeration.OrderStatus.WaitConfirm\">Hủy đơn</el-button>\r\n          </div>\r\n        </div>\r\n        <div class=\"line\"></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"empty-order tw-p-6 tw-text-center\" v-else>\r\n      Không có đơn hàng nào\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from \"vuex\";\r\nexport default {\r\nprops:{\r\n    type:{\r\n      type:Number,\r\n      default:0\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      activeTab: -1,\r\n      tabs: [\r\n        \"Tất cả\",\r\n        \"Chờ xác nhận\",\r\n        \"Chờ lấy hàng\",\r\n        \"Đang giao hàng\",\r\n        \"Thành công\",\r\n        \"Đã hủy\",\r\n      ],\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(\"customer\", [\"customer\"]),\r\n    ...mapState(\"order\", [\"purchasedHistory\",'phoneNumber']),\r\n  },\r\n  methods:{\r\n    ...mapActions('order',['getFollowOrder','updateOrder']),\r\n    selectStatus(status){\r\n      const me=this\r\n      me.activeTab=status\r\n      me.getFollowOrder({phoneNumber:me.phoneNumber,status:status})\r\n    },\r\n    onCancelOrder(order){\r\n      const me=this\r\n      const newOrder = JSON.parse(JSON.stringify(order));\r\n      newOrder.OrderStatus = me.$enumeration.OrderStatus.Cancelled;\r\n      const params = {\r\n        id: newOrder.OrderID,\r\n        params: newOrder,\r\n      };\r\n      const h = this.$createElement;\r\n      me.updateOrder(params)\r\n        .then(async (res) => {\r\n          if (res) {\r\n            me.$notify({\r\n              title: me.$t(\"Notify.Success\"),\r\n              dangerouslyUseHTMLString: true,\r\n              message: h(\r\n                \"i\",\r\n                { style: \"color: teal\" },\r\n                me.$t(\"Notify.CancelOrderSuccess\", { orderID: newOrder.OrderID })\r\n                \r\n              ),\r\n              type: \"success\"\r\n            });\r\n            await me.getFollowOrder({phoneNumber:me.phoneNumber,status:me.activeTab})\r\n          } else {\r\n            me.$notify({\r\n              title: me.$t(\"Notify.Error\"),\r\n              message: h(\r\n                \"i\",\r\n                { style: \"color: teal\" },\r\n                me.$t(\"Notify.HasError\")\r\n              ),\r\n              type: \"error\",\r\n            });\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          me.$notify({\r\n            title: me.$t(\"Notify.Error\"),\r\n            message: h(\"i\", { style: \"color: teal\" }, me.$t(\"Notify.HasError\")),\r\n            type: \"error\",\r\n          });\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.line {\r\n  height: 1px;\r\n  width: 100%;\r\n  background-color: rgb(175, 174, 174);\r\n}\r\n\r\n.border-right {\r\n  border-right: 1px solid rgb(175, 174, 174);\r\n}\r\n</style>\r\n<style scoped>\r\n.is-active {\r\n  @apply tw-bg-red-500 tw-text-white !important;\r\n}\r\n.cacel-btn{\r\n  @apply tw-bg-red-500 tw-text-white !important;\r\n}\r\n</style>"]}]}