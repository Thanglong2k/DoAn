{"remainingRequest":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\views\\product-detail\\review\\review.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\views\\product-detail\\review\\review.vue","mtime":1655634385869},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUmV2aWV3Q3VzdG9tZXJJbmZvUG9wdXAgZnJvbSAiLi4vcG9wdXAvY3VzdG9tZXItaW5mby1wb3B1cC52dWUiOw0KaW1wb3J0IFJldmlld1NsaWRlcnMgZnJvbSAiLi9yZXZpZXctc2xpZGVycy52dWUiOw0KaW1wb3J0IEFyZWFDYXJkIGZyb20gIkAvY29tcG9uZW50cy9jb250cm9scy9hcmVhLWNhcmQiOw0KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgQXJlYUNhcmQsDQogICAgUmV2aWV3Q3VzdG9tZXJJbmZvUG9wdXAsDQogICAgUmV2aWV3U2xpZGVycywNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBwcm9kdWN0OiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0OiAoKSA9PiB7fSwNCiAgICB9LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzaG93UmF0aW5nOiBmYWxzZSwNCiAgICAgIG1vZGVsOiA0LA0KICAgICAgcmF0aW5nOiAwLA0KDQogICAgICBjb250ZW50OiAiIiwNCiAgICAgIHNob3dSZXZpZXdFcnJvcjogZmFsc2UsDQogICAgICBzaG93Q29tbWVudEVycm9yOiBmYWxzZSwNCiAgICAgIHBhZ2VJbmRleDogMSwNCiAgICAgIHBhZ2VTaXplOiA1LA0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoImV2YWx1YXRpb24iLCBbImV2YWx1YXRpb25zIiwgInBhZ2VUb3RhbCIsICJyZXZpZXdUb3RhbCJdKSwNCiAgICAuLi5tYXBTdGF0ZSgib3JkZXIiLCBbDQogICAgICAiaXNDaGVja0N1c3RvbWVyUHVyY2hhc2VkUHJvZHVjdCIsDQogICAgICAiY3VzdG9tZXJJRFB1cmNoYXNlZCIsDQogICAgXSksDQogICAgcHJvZHVjdFNlbGVjdGVkKCkgew0KICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdDsNCiAgICB9LA0KICB9LA0KICBhc3luYyBtb3VudGVkKCkgew0KICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICBtZS4kY29tbW9uRm4uc2hvd01hcmsoInJldmlldyIpOw0KDQogICAgYXdhaXQgbWUuZ2V0RXZhbHVhdGlvbk9mUHJvZHVjdCgxKTsNCiAgICBtZS4kY29tbW9uRm4uaGlkZU1hcmsoInJldmlldyIpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwQWN0aW9ucygiZXZhbHVhdGlvbiIsIFsiZ2V0RXZhbHVhdGlvbkJ5UHJvZHVjdElEIl0pLA0KICAgIC4uLm1hcE11dGF0aW9ucygiZXZhbHVhdGlvbiIsIFsic2V0VmFsdWVSYXRpbmciLCAic2V0Q29udGVudFJhdGluZyJdKSwNCiAgICAuLi5tYXBBY3Rpb25zKCJvcmRlciIsIFsiY2hlY2tDdXN0b21lclB1cmNoYXNlZFByb2R1Y3QiXSksDQogICAgLi4ubWFwQWN0aW9ucygiZXZhbHVhdGlvbiIsIFsiaW5zZXJ0UmV2aWV3T2ZQcm91Y3QiXSksDQogICAgLyoqDQogICAgICogSGnhu4NuIHRo4buLIMSRw6FuaCBnacOhDQogICAgICovDQogICAgb25TaG93UmF0aW5nKCkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgbWUuc2hvd1JhdGluZyA9IHRydWU7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiBH4butaSDEkcOhbmggZ2nDoQ0KICAgICAqLw0KICAgIG9uU2VuZFJldmlldygpIHsNCiAgICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICAgIGlmIChtZS5yYXRpbmcgPT09IDApIHsNCiAgICAgICAgbWUuc2hvd1Jldmlld0Vycm9yID0gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIGlmIChtZS5jb250ZW50Lmxlbmd0aCA8IDMpIHsNCiAgICAgICAgbWUuc2hvd0NvbW1lbnRFcnJvciA9IHRydWU7DQogICAgICB9DQogICAgICBpZiAoIW1lLnNob3dSZXZpZXdFcnJvciAmJiAhbWUuc2hvd0NvbW1lbnRFcnJvcikgew0KICAgICAgICBtZS5zZXRWYWx1ZVJhdGluZyhtZS5yYXRpbmcpOw0KICAgICAgICBtZS5zZXRDb250ZW50UmF0aW5nKG1lLmNvbnRlbnQpOw0KICAgICAgICBtZS4kcmVmcy5wb3B1cC5zZXRNb2RlbCh0cnVlKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIEzGsHUgxJHDoW5oIGdpw6ENCiAgICAgKi8NCiAgICBhc3luYyBzYXZlUmV2aWV3KG1vZGVsRm9ybSkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgY29uc3QgcGFyYW1DaGVjayA9IHsNCiAgICAgICAgcGhvbmVOdW1iZXI6IG1vZGVsRm9ybS5QaG9uZU51bWJlciwNCiAgICAgICAgcHJvZHVjdEF0dHJpYnV0ZUlEOiBtZS5wcm9kdWN0U2VsZWN0ZWQuUHJvZHVjdEF0dHJpYnV0ZUlELA0KICAgICAgfTsNCiAgICAgIGF3YWl0IG1lLmNoZWNrQ3VzdG9tZXJQdXJjaGFzZWRQcm9kdWN0KHBhcmFtQ2hlY2spOw0KICAgICAgaWYgKCFtZS5pc0NoZWNrQ3VzdG9tZXJQdXJjaGFzZWRQcm9kdWN0KSB7DQogICAgICAgIG1lLiRhbGVydCgiQuG6oW4gY2jGsGEgbXVhIHPhuqNuIHBo4bqpbSBuw6B5ISIsICJD4bqjbmggYsOhbyIsIHsNCiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIsSQ4buTbmcgw70iLA0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnN0IHBhcmFtID0gew0KICAgICAgICAgIEZ1bGxOYW1lOiBtb2RlbEZvcm0uRnVsbE5hbWUsDQogICAgICAgICAgUGhvbmVOdW1iZXI6IG1vZGVsRm9ybS5QaG9uZU51bWJlciwNCiAgICAgICAgICBFbWFpbDogbW9kZWxGb3JtLkVtYWlsLA0KICAgICAgICB9Ow0KICAgICAgICBjb25zdCBwYXJhbUV2YWx1YXRpb24gPSB7DQogICAgICAgICAgUHJvZHVjdEF0dHJpYnV0ZUlEOiBtZS5wcm9kdWN0U2VsZWN0ZWQuUHJvZHVjdEF0dHJpYnV0ZUlELA0KICAgICAgICAgIEN1c3RvbWVySUQ6IG1lLmN1c3RvbWVySURQdXJjaGFzZWQsDQogICAgICAgICAgUmF0ZTogbWUucmF0aW5nLA0KICAgICAgICAgIENvbnRlbnQ6IG1lLmNvbnRlbnQsDQogICAgICAgIH07DQogICAgICAgIGNvbnN0IGggPSB0aGlzLiRjcmVhdGVFbGVtZW50Ow0KICAgICAgICBtZS5pbnNlcnRSZXZpZXdPZlByb3VjdChwYXJhbUV2YWx1YXRpb24pDQogICAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gew0KICAgICAgICAgICAgbWUuJGNvbW1vbkZuLnNob3dNYXJrKCJyZXZpZXciKTsNCiAgICAgICAgICAgIG1lLnJhdGluZyA9IDA7DQogICAgICAgICAgICBtZS5jb250ZW50ID0gIiI7DQogICAgICAgICAgICBhd2FpdCBtZS5nZXRFdmFsdWF0aW9uT2ZQcm9kdWN0KDEpOw0KICAgICAgICAgICAgbWUuJGNvbW1vbkZuLmhpZGVNYXJrKCJyZXZpZXciKTsNCiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgICAgIHRpdGxlOiBtZS4kdCgiTm90aWZ5LlN1Y2Nlc3MiKSwNCiAgICAgICAgICAgICAgbWVzc2FnZTogaCgNCiAgICAgICAgICAgICAgICAiaSIsDQogICAgICAgICAgICAgICAgeyBzdHlsZTogImNvbG9yOiB0ZWFsIiB9LA0KICAgICAgICAgICAgICAgIG1lLiR0KCJOb3RpZnkuSW5zZXJ0U3VjY2VzcyIsIHsgb2JqZWN0OiAixJHDoW5oIGdpw6EiIH0pDQogICAgICAgICAgICAgICksDQogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKChlKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3Ioew0KICAgICAgICAgICAgICB0aXRsZTogbWUuJHQoIk5vdGlmeS5FcnJvciIpLA0KICAgICAgICAgICAgICBtZXNzYWdlOiBoKA0KICAgICAgICAgICAgICAgICJpIiwNCiAgICAgICAgICAgICAgICB7IHN0eWxlOiAiY29sb3I6IHRlYWwiIH0sDQogICAgICAgICAgICAgICAgbWUuJHQoIk5vdGlmeS5IYXNFcnJvciIpDQogICAgICAgICAgICAgICksDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vc2V0IGF2YXRhciDEkcOhbmggZ2nDoSBjaG8gbmfGsOG7nWkgZMO5bmcNCiAgICBuYW1lQXZhdGFyKG5hbWUpIHsNCiAgICAgIHJldHVybiB0aGlzLiRjb21tb25Gbi50YWtlVGhlRmlyc3RMZXR0ZXIobmFtZSk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiBM4bqleSBkYW5oIHPDoWNoIMSRw6FuaCBnacOhIGPhu6dhIHPhuqNuIHBo4bqpbQ0KICAgICAqLw0KICAgIGdldEV2YWx1YXRpb25PZlByb2R1Y3QocGFnZUluZGV4KSB7DQogICAgICBjb25zdCBtZSA9IHRoaXM7DQogICAgICBjb25zdCBwYXJhbXMgPSB7DQogICAgICAgIHByb2R1Y3RBdHRyaWJ1dGVJRDogbWUucHJvZHVjdFNlbGVjdGVkLlByb2R1Y3RBdHRyaWJ1dGVJRCwNCiAgICAgICAgcGFnZWluZGV4OiBwYWdlSW5kZXgsDQogICAgICAgIHBhZ2VTaXplOiBtZS5wYWdlU2l6ZSwNCiAgICAgIH07DQogICAgICBtZS5nZXRFdmFsdWF0aW9uQnlQcm9kdWN0SUQocGFyYW1zKTsNCiAgICB9LA0KICB9LA0KICB3YXRjaDogew0KICAgIHJhdGluZyhuZXdWYWwpIHsNCiAgICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICAgIGlmIChuZXdWYWwgIT0gMCkgew0KICAgICAgICBtZS5zaG93UmV2aWV3RXJyb3IgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNvbnRlbnQobmV3VmFsKSB7DQogICAgICBjb25zdCBtZSA9IHRoaXM7DQogICAgICBpZiAobmV3VmFsLmxlbmd0aCA+PSAzKSB7DQogICAgICAgIG1lLnNob3dDb21tZW50RXJyb3IgPSBmYWxzZTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIHBhZ2VJbmRleCgpIHsNCiAgICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICAgIG1lLiRjb21tb25Gbi5zaG93TWFyaygicmV2aWV3Iik7DQoNCiAgICAgIGF3YWl0IG1lLmdldEV2YWx1YXRpb25PZlByb2R1Y3QobWUucGFnZUluZGV4KTsNCiAgICAgIG1lLiRjb21tb25Gbi5oaWRlTWFyaygicmV2aWV3Iik7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["review.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"review.vue","sourceRoot":"src/components/client/views/product-detail/review","sourcesContent":["<template>\r\n  <div class=\"review tw-mt-4\">\r\n    <area-card :title=\"$t('Rating.ProductReview', { number: reviewTotal })\">\r\n      <div class=\"review-info tw-flex tw-justify-around tw-w-full\">\r\n        <div class=\"average-rating\">\r\n          <div class=\"average-rating-title\">\r\n            {{ $t(\"DetailProduct.AvgReview\") }}\r\n          </div>\r\n          <div class=\"rating-rate\">{{ productSelected.Rate }}/5</div>\r\n          <el-rate\r\n            v-model=\"productSelected.Rate\"\r\n            disabled\r\n            :allow-half=\"true\"\r\n          ></el-rate>\r\n        </div>\r\n        <div class=\"table-rating\">\r\n          <ReviewSliders :product=\"productSelected\" />\r\n        </div>\r\n        <div class=\"writing-rating\">\r\n          <div class=\"question\">\r\n            {{ $t(\"DetailProduct.UsedThisProductYet\") }}\r\n          </div>\r\n          <v-btn @click=\"onShowRating\" class=\"rating-btn\">{{\r\n            $t(\"DetailProduct.SendYourReview\")\r\n          }}</v-btn>\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"\r\n          area-rating\r\n          tw-w-full tw-flex tw-items-start tw-mt-6 tw-p-6 tw-bg-gray-100\r\n        \"\r\n        v-if=\"showRating\"\r\n      >\r\n        <div class=\"product-rating tw-w-2/5\">\r\n          <div class=\"rating-question\">\r\n            {{ $t(\"DetailProduct.HowManyStarsDoYouGiveThisProduct\") }}\r\n          </div>\r\n          <el-rate\r\n            v-model=\"rating\"\r\n            :texts=\"[\r\n              $t('Rating.DontLike'),\r\n              $t('Rating.Possible'),\r\n              $t('Rating.Ordinary'),\r\n              $t('Rating.Glad'),\r\n              $t('Rating.Wonderful'),\r\n            ]\"\r\n            show-text\r\n          ></el-rate>\r\n          <span class=\"text-error\" v-if=\"showReviewError\"\r\n            >Vui lòng chọn đánh giá của bạn về sản phẩm này</span\r\n          >\r\n        </div>\r\n        <div class=\"area-writing tw-flex-1 tw-ml-6 tw-relative\">\r\n          <!-- <v-textarea class=\"text-area\" aria-placeholder=\"Bạn có lời khuyên gì cho cửa hàng\" rows=\"3\"></v-textarea> -->\r\n\r\n          <el-input\r\n            type=\"textarea\"\r\n            :autosize=\"{ minRows: 3 }\"\r\n            :placeholder=\"$t('DetailProduct.WhatAdviceDoYouHaveForTheStore')\"\r\n            v-model=\"content\"\r\n          >\r\n          </el-input>\r\n          <v-btn @click=\"onSendReview\" class=\"send-btn\">{{\r\n            $t(\"DetailProduct.SendReview\")\r\n          }}</v-btn>\r\n          <span class=\"text-error\" v-if=\"showCommentError\"\r\n            >Mời viết bình luận (tối thiểu 3 kí tự)</span\r\n          >\r\n        </div>\r\n      </div>\r\n      <!-- Danh sách đánh giá của khách hàng -->\r\n      <div class=\"review-result tw-mt-6\">\r\n        <div class=\"review-list\">\r\n          <div\r\n            class=\"review-item tw-flex tw-mb-4\"\r\n            v-for=\"item in evaluations\"\r\n            :key=\"item.EvaluationID\"\r\n          >\r\n            <div class=\"avatar-area tw-w-16 tw-h-16 tw-mr-4\">\r\n              <el-avatar shape=\"square\">\r\n                {{ nameAvatar(item.CustomerName) }}\r\n              </el-avatar>\r\n            </div>\r\n            <div class=\"review-info tw-flex-1\">\r\n              <div class=\"user-name tw-font-semibold\">\r\n                {{ item.CustomerName }}\r\n              </div>\r\n              <div class=\"rating tw-flex\">\r\n                <el-rate v-model=\"item.Rate\" disabled></el-rate>\r\n                <div class=\"rating-time tw-text-sm tw-text-gray-400\">\r\n                  {{ $commonFn.setCommentTime(item.CreatedDate) }}\r\n                </div>\r\n              </div>\r\n              <div class=\"content\">\r\n                {{ item.Content }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"panigation\">\r\n          <v-pagination\r\n            v-if=\"pageTotal > 1\"\r\n            v-model=\"pageIndex\"\r\n            :length=\"pageTotal\"\r\n            :total-visible=\"7\"\r\n          ></v-pagination>\r\n        </div>\r\n      </div>\r\n    </area-card>\r\n    <ReviewCustomerInfoPopup\r\n      ref=\"popup\"\r\n      @saveReview=\"saveReview\"\r\n      title=\"Hoàn thành gửi đánh giá\"\r\n      :type=\"$enumeration.CustomerInfoPopup.Review\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ReviewCustomerInfoPopup from \"../popup/customer-info-popup.vue\";\r\nimport ReviewSliders from \"./review-sliders.vue\";\r\nimport AreaCard from \"@/components/controls/area-card\";\r\nimport { mapState, mapActions, mapMutations } from \"vuex\";\r\nexport default {\r\n  components: {\r\n    AreaCard,\r\n    ReviewCustomerInfoPopup,\r\n    ReviewSliders,\r\n  },\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      showRating: false,\r\n      model: 4,\r\n      rating: 0,\r\n\r\n      content: \"\",\r\n      showReviewError: false,\r\n      showCommentError: false,\r\n      pageIndex: 1,\r\n      pageSize: 5,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(\"evaluation\", [\"evaluations\", \"pageTotal\", \"reviewTotal\"]),\r\n    ...mapState(\"order\", [\r\n      \"isCheckCustomerPurchasedProduct\",\r\n      \"customerIDPurchased\",\r\n    ]),\r\n    productSelected() {\r\n      return this.product;\r\n    },\r\n  },\r\n  async mounted() {\r\n    const me = this;\r\n    me.$commonFn.showMark(\"review\");\r\n\r\n    await me.getEvaluationOfProduct(1);\r\n    me.$commonFn.hideMark(\"review\");\r\n  },\r\n  methods: {\r\n    ...mapActions(\"evaluation\", [\"getEvaluationByProductID\"]),\r\n    ...mapMutations(\"evaluation\", [\"setValueRating\", \"setContentRating\"]),\r\n    ...mapActions(\"order\", [\"checkCustomerPurchasedProduct\"]),\r\n    ...mapActions(\"evaluation\", [\"insertReviewOfProuct\"]),\r\n    /**\r\n     * Hiển thị đánh giá\r\n     */\r\n    onShowRating() {\r\n      const me = this;\r\n      me.showRating = true;\r\n    },\r\n    /**\r\n     * Gửi đánh giá\r\n     */\r\n    onSendReview() {\r\n      const me = this;\r\n      if (me.rating === 0) {\r\n        me.showReviewError = true;\r\n      }\r\n      if (me.content.length < 3) {\r\n        me.showCommentError = true;\r\n      }\r\n      if (!me.showReviewError && !me.showCommentError) {\r\n        me.setValueRating(me.rating);\r\n        me.setContentRating(me.content);\r\n        me.$refs.popup.setModel(true);\r\n      }\r\n    },\r\n    /**\r\n     * Lưu đánh giá\r\n     */\r\n    async saveReview(modelForm) {\r\n      const me = this;\r\n      const paramCheck = {\r\n        phoneNumber: modelForm.PhoneNumber,\r\n        productAttributeID: me.productSelected.ProductAttributeID,\r\n      };\r\n      await me.checkCustomerPurchasedProduct(paramCheck);\r\n      if (!me.isCheckCustomerPurchasedProduct) {\r\n        me.$alert(\"Bạn chưa mua sản phẩm này!\", \"Cảnh báo\", {\r\n          confirmButtonText: \"Đồng ý\",\r\n        });\r\n      } else {\r\n        const param = {\r\n          FullName: modelForm.FullName,\r\n          PhoneNumber: modelForm.PhoneNumber,\r\n          Email: modelForm.Email,\r\n        };\r\n        const paramEvaluation = {\r\n          ProductAttributeID: me.productSelected.ProductAttributeID,\r\n          CustomerID: me.customerIDPurchased,\r\n          Rate: me.rating,\r\n          Content: me.content,\r\n        };\r\n        const h = this.$createElement;\r\n        me.insertReviewOfProuct(paramEvaluation)\r\n          .then(async (res) => {\r\n            me.$commonFn.showMark(\"review\");\r\n            me.rating = 0;\r\n            me.content = \"\";\r\n            await me.getEvaluationOfProduct(1);\r\n            me.$commonFn.hideMark(\"review\");\r\n            this.$notify({\r\n              title: me.$t(\"Notify.Success\"),\r\n              message: h(\r\n                \"i\",\r\n                { style: \"color: teal\" },\r\n                me.$t(\"Notify.InsertSuccess\", { object: \"đánh giá\" })\r\n              ),\r\n              type: \"success\",\r\n            });\r\n          })\r\n          .catch((e) => {\r\n            this.$notify.error({\r\n              title: me.$t(\"Notify.Error\"),\r\n              message: h(\r\n                \"i\",\r\n                { style: \"color: teal\" },\r\n                me.$t(\"Notify.HasError\")\r\n              ),\r\n            });\r\n          });\r\n      }\r\n    },\r\n    //set avatar đánh giá cho người dùng\r\n    nameAvatar(name) {\r\n      return this.$commonFn.takeTheFirstLetter(name);\r\n    },\r\n    /**\r\n     * Lấy danh sách đánh giá của sản phẩm\r\n     */\r\n    getEvaluationOfProduct(pageIndex) {\r\n      const me = this;\r\n      const params = {\r\n        productAttributeID: me.productSelected.ProductAttributeID,\r\n        pageindex: pageIndex,\r\n        pageSize: me.pageSize,\r\n      };\r\n      me.getEvaluationByProductID(params);\r\n    },\r\n  },\r\n  watch: {\r\n    rating(newVal) {\r\n      const me = this;\r\n      if (newVal != 0) {\r\n        me.showReviewError = false;\r\n      }\r\n    },\r\n    content(newVal) {\r\n      const me = this;\r\n      if (newVal.length >= 3) {\r\n        me.showCommentError = false;\r\n      }\r\n    },\r\n    async pageIndex() {\r\n      const me = this;\r\n      me.$commonFn.showMark(\"review\");\r\n\r\n      await me.getEvaluationOfProduct(me.pageIndex);\r\n      me.$commonFn.hideMark(\"review\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.send-btn {\r\n  @apply tw-bg-red-500 tw-text-white tw-absolute tw-right-4 tw-top-4 !important;\r\n}\r\n.rating-btn {\r\n  @apply tw-bg-red-500 tw-text-white !important;\r\n}\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n@import \"@/styles/mixins/mixins.scss\";\r\n.v-text-area text-area {\r\n  border: $default-border;\r\n}\r\n\r\n::v-deep {\r\n  .rating {\r\n    .el-rate {\r\n      .el-rate__item {\r\n        .el-rate__icon {\r\n          font-size: 14px !important;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .el-textarea__inner {\r\n    padding-right: 168px;\r\n  }\r\n}\r\n.area-rating {\r\n  .text-error {\r\n    color: red;\r\n    font-size: 13px;\r\n  }\r\n}\r\n.review-result {\r\n  .review-list {\r\n    .review-item {\r\n      .avatar-area {\r\n        .el-avatar {\r\n          height: 100%;\r\n          width: 100%;\r\n          line-height: 64px;\r\n          font-size: 20px;\r\n        }\r\n      }\r\n      .review-info {\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}