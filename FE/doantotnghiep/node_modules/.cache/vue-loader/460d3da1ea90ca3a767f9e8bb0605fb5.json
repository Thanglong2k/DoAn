{"remainingRequest":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\components\\product-cart\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\components\\product-cart\\index.vue","mtime":1655642065496},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUHJvZHVjdENhcnQgZnJvbSAiQC9jb21wb25lbnRzL2NsaWVudC92aWV3cy9wcm9kdWN0LWNhcnQvcHJvZHVjdC1pbmZvLnZ1ZSI7DQppbXBvcnQgRW1wdHlDYXJ0IGZyb20gIkAvY29tcG9uZW50cy9jbGllbnQvdmlld3MvcHJvZHVjdC1jYXJ0L2RhdGEtZW1wdHkudnVlIjsNCmltcG9ydCBTdWNlc3NQb3B1cCBmcm9tICJAL2NvbXBvbmVudHMvY2xpZW50L3ZpZXdzL3Byb2R1Y3QtY2FydC9zdWNlc3MtcG9wdXAiOw0KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgUHJvZHVjdENhcnQsDQogICAgRW1wdHlDYXJ0LA0KICAgIFN1Y2Vzc1BvcHVwLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBtb2RlbEZvcm06IHsNCiAgICAgICAgR2VuZGVyOiAwLA0KICAgICAgfSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIEZ1bGxOYW1lOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIkjDo3kgbmjhuq1wIHRow7RuZyB0aW4hIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgICAgeyBtaW46IDMsIG1lc3NhZ2U6ICJUw6puIHThu5FpIHRoaeG7g3UgMyBrw60gdOG7sSIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgICBQaG9uZU51bWJlcjogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICJIw6N5IG5o4bqtcCB0aMO0bmcgdGluISIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgICBHZW5kZXI6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAiSMOjeSBuaOG6rXAgdGjDtG5nIHRpbiEiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgICAgRW1haWw6IFsNCiAgICAgICAgICAvLyB7dmFsaWRhdG9yOnZhbGlkYXRlRW1haWwsdHJpZ2dlcjogJ2JsdXInfQ0KICAgICAgICBdLA0KICAgICAgICBEZWxpdmVyeUFkZHJlc3M6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAiSMOjeSBuaOG6rXAgdGjDtG5nIHRpbiEiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgXSwNCiAgICAgIH0sDQogICAgICBzaG93U3VjY2VzczogZmFsc2UsDQogICAgICBwcm9kdWN0Q2FydFN1Y2Nlc3M6IG51bGwsDQogICAgICBoYXNDdXN0b21lcjogZmFsc2UsDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBTdGF0ZSgiY2FydCIsIFsicHJvZHVjdENhcnQiLCAicHJvZHVjdENhcnRMZW5ndGgiXSksDQogICAgLi4ubWFwU3RhdGUoImN1c3RvbWVyIiwgWyJjdXN0b21lciJdKSwNCg0KICAgIC8qKg0KICAgICAqIFThu5VuZyB0aeG7gW4NCiAgICAgKi8NCiAgICBwcmljZVRvdGFsKCkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgcmV0dXJuIG1lLnByb2R1Y3RDYXJ0LnJlZHVjZSgodG90YWwsIGN1cnJlbnQpID0+IHsNCiAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICB0b3RhbCArDQogICAgICAgICAgY3VycmVudC5Qcm9kdWN0QXR0cmlidXRlc1swXS5QcmljZSAqDQogICAgICAgICAgICBjdXJyZW50LlByb2R1Y3RBdHRyaWJ1dGVzWzBdLlF1YW50aXR5DQogICAgICAgICk7DQogICAgICB9LCAwKTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIFThu5VuZyB0aeG7gW4NCiAgICAgKi8NCiAgICBwcm9tb3Rpb25QcmljZSgpIHsNCiAgICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICAgIHJldHVybiBtZS5wcm9kdWN0Q2FydC5yZWR1Y2UoKHRvdGFsLCBjdXJyZW50KSA9PiB7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgdG90YWwgKw0KICAgICAgICAgIGN1cnJlbnQuUHJvZHVjdEF0dHJpYnV0ZXNbMF0uUHJvbW90aW9uUHJpY2UgKg0KICAgICAgICAgICAgY3VycmVudC5Qcm9kdWN0QXR0cmlidXRlc1swXS5RdWFudGl0eQ0KICAgICAgICApOw0KICAgICAgfSwgMCk7DQogICAgfSwNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICBjb25zdCBtZSA9IHRoaXM7DQoNCiAgICBpZiAoDQogICAgICBtZS5wcm9kdWN0Q2FydC5sZW5ndGggPT09IDAgJiYNCiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwcm9kdWN0Q2FydCIpICE9ICIiICYmDQogICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicHJvZHVjdENhcnQiKSAhPSBudWxsDQogICAgKSB7DQogICAgICBtZS5zZXRQcm9kdWN0Q2FydChKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwcm9kdWN0Q2FydCIpKSk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLi4ubWFwTXV0YXRpb25zKCJjYXJ0IiwgWyJzZXRQcm9kdWN0Q2FydExlbmd0aCIsICJzZXRQcm9kdWN0Q2FydCJdKSwNCiAgICAuLi5tYXBBY3Rpb25zKCJvcmRlciIsIFsiaW5zZXJ0T3JkZXIiXSksDQogICAgLi4ubWFwQWN0aW9ucygiY3VzdG9tZXIiLCBbDQogICAgICAiZ2V0Q3VzdG9tZXJCeVBob25lTnVtYmVyIiwNCiAgICAgICJpbnNlcnRDdXN0b21lciIsDQogICAgICAidXBkYXRlQ3VzdG9tZXIiLA0KICAgIF0pLA0KICAgIG9yZGVyUHJvZHVjdCgpIHsNCiAgICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICAgIG1lLiRyZWZzWyJydWxlRm9ybSJdLnZhbGlkYXRlKGFzeW5jICh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBjb25zdCBoID0gdGhpcy4kY3JlYXRlRWxlbWVudDsNCiAgICAgICAgICAvLyBhd2FpdCBtZS5nZXRDdXN0b21lckJ5UGhvbmVOdW1iZXIoew0KICAgICAgICAgIC8vICAgcGhvbmVOdW1iZXI6IG1lLm1vZGVsRm9ybS5QaG9uZU51bWJlciwNCiAgICAgICAgICAvLyB9KTsNCg0KICAgICAgICAgIGlmICghbWUuaGFzQ3VzdG9tZXIpIHsNCiAgICAgICAgICAgIGNvbnN0IHBhcmFtQ3VzdG9tZXIgPSB7DQogICAgICAgICAgICAgIEN1c3RvbWVyTmFtZTogbWUubW9kZWxGb3JtLkZ1bGxOYW1lLA0KICAgICAgICAgICAgICBFbWFpbDogbWUubW9kZWxGb3JtLkVtYWlsLA0KICAgICAgICAgICAgICBQaG9uZU51bWJlcjogbWUubW9kZWxGb3JtLlBob25lTnVtYmVyLA0KICAgICAgICAgICAgICBHZW5kZXI6DQogICAgICAgICAgICAgICAgbWUubW9kZWxGb3JtLkdlbmRlciA9PT0gMA0KICAgICAgICAgICAgICAgICAgPyBtZS4kZW51bWVyYXRpb24uR2VuZGVyLk1hbGUNCiAgICAgICAgICAgICAgICAgIDogbWUuJGVudW1lcmF0aW9uLkdlbmRlci5GZU1hbGUsDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgY29uc3QgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7DQogICAgICAgICAgICBhd2FpdCBtZQ0KICAgICAgICAgICAgICAuaW5zZXJ0Q3VzdG9tZXIocGFyYW1DdXN0b21lcikNCiAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXMpIHsNCiAgICAgICAgICAgICAgICAgIGF3YWl0IG1lLmdldEN1c3RvbWVyQnlQaG9uZU51bWJlcih7DQogICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBtZS5tb2RlbEZvcm0uUGhvbmVOdW1iZXIsDQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgIGF3YWl0IG1lLmluc2VydE5ld09yZGVyKCkNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsNCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG1lLiR0KCJOb3RpZnkuRXJyb3IiKSwNCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogaCgNCiAgICAgICAgICAgICAgICAgICAgICAiaSIsDQogICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogImNvbG9yOiB0ZWFsIiB9LA0KICAgICAgICAgICAgICAgICAgICAgIG1lLiR0KCJOb3RpZnkuSGFzRXJyb3IiKQ0KICAgICAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3Ioew0KICAgICAgICAgICAgICAgICAgdGl0bGU6IG1lLiR0KCJOb3RpZnkuRXJyb3IiKSwNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGgoDQogICAgICAgICAgICAgICAgICAgICJpIiwNCiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogImNvbG9yOiB0ZWFsIiB9LA0KICAgICAgICAgICAgICAgICAgICBtZS4kdCgiTm90aWZ5Lkhhc0Vycm9yIikNCiAgICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBsZXQgdHlwZUNoYW5nZSA9IDA7DQogICAgICAgICAgICBsZXQgbWVzc2FnZSA9ICJC4bqhbiBjw7MgbXXhu5FuIGPhuq1wIG5o4bqtdCB0aMO0bmcgdGluIjsNCiAgICAgICAgICAgIGlmIChtZS5tb2RlbEZvcm0uRnVsbE5hbWUgIT09IG1lLmN1c3RvbWVyLkN1c3RvbWVyTmFtZSkgew0KICAgICAgICAgICAgICBtZXNzYWdlICs9ICIgPGI+VMOqbiBraMOhY2ggaMOgbmc8L2I+LCI7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAobWUubW9kZWxGb3JtLkdlbmRlciAhPT0gTnVtYmVyKG1lLmN1c3RvbWVyLkdlbmRlcikpIHsNCiAgICAgICAgICAgICAgbWVzc2FnZSArPSAiIDxiPkdp4bubaSB0w61uaDwvYj4sIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChtZS5tb2RlbEZvcm0uRW1haWwgIT09IG1lLmN1c3RvbWVyLkVtYWlsKSB7DQogICAgICAgICAgICAgIG1lc3NhZ2UgKz0gIiA8Yj5FbWFpbDwvYj4sIjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgbWUubW9kZWxGb3JtLkZ1bGxOYW1lICE9PSBtZS5jdXN0b21lci5DdXN0b21lck5hbWUgfHwNCiAgICAgICAgICAgICAgbWUubW9kZWxGb3JtLkdlbmRlciAhPT0gTnVtYmVyKG1lLmN1c3RvbWVyLkdlbmRlcikgfHwNCiAgICAgICAgICAgICAgbWUubW9kZWxGb3JtLkVtYWlsICE9PSBtZS5jdXN0b21lci5FbWFpbA0KICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgIHR5cGVDaGFuZ2UgPSAxOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbWVzc2FnZSA9IG1lc3NhZ2Uuc2xpY2UoMCwgbWVzc2FnZS5sZW5ndGggLSAxKTsNCiAgICAgICAgICAgIG1lc3NhZ2UgKz0gIiDEkcOjIHRoYXkgxJHhu5VpIGtow7RuZz8iOw0KICAgICAgICAgICAgaWYgKHR5cGVDaGFuZ2UgPT09IDEpIHsNCiAgICAgICAgICAgICAgdGhpcy4kY29uZmlybShtZXNzYWdlLCAiVGjDtG5nIHRpbiIsIHsNCiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIsSQ4buTbmcgw70iLA0KICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICJI4buneSIsDQogICAgICAgICAgICAgICAgdHlwZTogImluZm8iLA0KICAgICAgICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwNCiAgICAgICAgICAgICAgfSkudGhlbihhc3luYyAoKSA9PiB7DQogICAgICAgICAgICAgICAgbWUubW9kZWxGb3JtLkdlbmRlciA9ICEhbWUubW9kZWxGb3JtLkdlbmRlcjsNCiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7DQogICAgICAgICAgICAgICAgICBpZDogbWUuY3VzdG9tZXIuQ3VzdG9tZXJJRCwNCiAgICAgICAgICAgICAgICAgIGN1c3RvbWVyOiBtZS5tb2RlbEZvcm0sDQogICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICBhd2FpdCBtZQ0KICAgICAgICAgICAgICAgICAgLnVwZGF0ZUN1c3RvbWVyKHBhcmFtcykNCiAgICAgICAgICAgICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgICAgICAgICAgIGlmIChyZXMuTUlTQUNvZGUgPT09ICJNSVNBLTAwNCIpIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IG1lLiR0KCJOb3RpZnkuRXJyb3IiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGgoDQogICAgICAgICAgICAgICAgICAgICAgICAgICJpIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogImNvbG9yOiB0ZWFsIiB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICBtZS4kdCgiTm90aWZ5Lkhhc0Vycm9yIikNCiAgICAgICAgICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbWUuZ2V0Q3VzdG9tZXJCeVBob25lTnVtYmVyKHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBtZS5tb2RlbEZvcm0uUGhvbmVOdW1iZXIsDQogICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbWUuaW5zZXJ0TmV3T3JkZXIoKQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7DQoNCiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsNCiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogbWUuJHQoIk5vdGlmeS5FcnJvciIpLA0KICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGgoDQogICAgICAgICAgICAgICAgICAgICAgICAiaSIsDQogICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiAiY29sb3I6IHRlYWwiIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBtZS4kdCgiTm90aWZ5Lkhhc0Vycm9yIikNCiAgICAgICAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICBhd2FpdCBtZS5pbnNlcnROZXdPcmRlcigpDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGFzeW5jIGluc2VydE5ld09yZGVyKCl7DQogICAgICBjb25zdCBtZT10aGlzDQogICAgICBjb25zdCBoID0gdGhpcy4kY3JlYXRlRWxlbWVudDsNCiAgICAgIHZhciBwYXJhbXMgPSB7DQogICAgICAgICAgICAgICAgICAgIG9yZGVyOiB7DQogICAgICAgICAgICAgICAgICAgICAgQ3VzdG9tZXJJRDogbWUuY3VzdG9tZXIuQ3VzdG9tZXJJRCwNCiAgICAgICAgICAgICAgICAgICAgICBUb3RhbFByaWNlOiBtZS5wcm9tb3Rpb25QcmljZSwNCiAgICAgICAgICAgICAgICAgICAgICBEZWxpdmVyeUFkZHJlc3M6IG1lLm1vZGVsRm9ybS5EZWxpdmVyeUFkZHJlc3MsDQogICAgICAgICAgICAgICAgICAgICAgTm90ZTogbWUubW9kZWxGb3JtLk5vdGUsDQogICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgIG9yZGVyRGV0YWlsczogWw0KICAgICAgICAgICAgICAgICAgICAgIC4uLm1lLnByb2R1Y3RDYXJ0Lm1hcCgoaXRlbSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvZHVjdEF0dHJpYnV0ZUlEOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uUHJvZHVjdEF0dHJpYnV0ZXNbMF0uUHJvZHVjdEF0dHJpYnV0ZUlELA0KICAgICAgICAgICAgICAgICAgICAgICAgICBRdWFudGl0eTogaXRlbS5Qcm9kdWN0QXR0cmlidXRlc1swXS5RdWFudGl0eSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgVW5pdFByaWNlOiBpdGVtLlByb2R1Y3RBdHRyaWJ1dGVzWzBdLlByb21vdGlvblByaWNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBpdGVtLlByb2R1Y3RBdHRyaWJ1dGVzWzBdLlByb21vdGlvblByaWNlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBpdGVtLlByb2R1Y3RBdHRyaWJ1dGVzWzBdLlByaWNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgICB9KSwNCiAgICAgICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICBhd2FpdCBtZQ0KICAgICAgICAgICAgICAgICAgICAuaW5zZXJ0T3JkZXIocGFyYW1zKQ0KICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcykgew0KICAgICAgICAgICAgICAgICAgICAgICAgbWUuJG5vdGlmeSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBtZS4kdCgiTm90aWZ5LlN1Y2Nlc3MiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogaCgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaSIsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogImNvbG9yOiB0ZWFsIiB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lLiR0KCJOb3RpZnkuSW5zZXJ0U3VjY2VzcyIsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogIsSRxqFuIGjDoG5nIiwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lLnByb2R1Y3RDYXJ0U3VjY2VzcyA9IEpTT04ucGFyc2UoDQogICAgICAgICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KG1lLnByb2R1Y3RDYXJ0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lLnNldFByb2R1Y3RDYXJ0KFtdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIG1lLnNldFByb2R1Y3RDYXJ0TGVuZ3RoKDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInByb2R1Y3RDYXJ0IiwgSlNPTi5zdHJpbmdpZnkoW10pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJwcm9kdWN0Q2FydExlbmd0aCIsIDApOw0KICAgICAgICAgICAgICAgICAgICAgICAgbWUuc2hvd1N1Y2Nlc3MgPSB0cnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgbWUuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIm5leHQiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWUuJHJlZnMucG9wdXAuc2V0TW9kZWwodHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgbWUuJG5vdGlmeSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBtZS4kdCgiTm90aWZ5LkVycm9yIiksDQogICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGgoDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgImkiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6ICJjb2xvcjogdGVhbCIgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZS4kdCgiTm90aWZ5Lkhhc0Vycm9yIikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7DQogICAgICAgICAgICAgICAgICAgICAgbWUuJG5vdGlmeSh7DQogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogbWUuJHQoIk5vdGlmeS5FcnJvciIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogaCgNCiAgICAgICAgICAgICAgICAgICAgICAgICAgImkiLA0KICAgICAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiAiY29sb3I6IHRlYWwiIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgIG1lLiR0KCJOb3RpZnkuSGFzRXJyb3IiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBjbG9zZVBvcHVwKCkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgbWUuc2hvd1N1Y2Nlc3MgPSBmYWxzZTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIE3hu58gZm9ybSB0aGVvIGTDtWkgxJHGoW4gaMOgbmcNCiAgICAgKi8NCiAgICBvcGVuRm9sbG93T3JkZXIoKSB7DQogICAgICBjb25zdCBtZSA9IHRoaXM7DQogICAgICBtZS4kcm91dGVyLnB1c2goIi9mb2xsb3ctb3JkZXIiKTsNCiAgICB9LA0KICAgIGFzeW5jIGNoYW5nZVBob25lTnVtYmVyKCkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgaWYgKG1lLm1vZGVsRm9ybS5QaG9uZU51bWJlciB8fCBtZS5tb2RlbEZvcm0uUGhvbmVOdW1iZXIgIT09ICIiKSB7DQogICAgICAgIGF3YWl0IG1lLmdldEN1c3RvbWVyQnlQaG9uZU51bWJlcih7DQogICAgICAgICAgcGhvbmVOdW1iZXI6IG1lLm1vZGVsRm9ybS5QaG9uZU51bWJlciwNCiAgICAgICAgfSk7DQogICAgICAgIGlmKG1lLmN1c3RvbWVyKXsNCiAgICAgICAgICBtZS5tb2RlbEZvcm0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG1lLmN1c3RvbWVyKSk7DQogICAgICAgIG1lLm1vZGVsRm9ybS5HZW5kZXIgPSBtZS5tb2RlbEZvcm0uR2VuZGVyID8gMSA6IDA7DQogICAgICAgIG1lLm1vZGVsRm9ybS5GdWxsTmFtZSA9IG1lLm1vZGVsRm9ybS5DdXN0b21lck5hbWU7DQogICAgICAgIG1lLmhhc0N1c3RvbWVyID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgIH0gZWxzZSB7DQogICAgICAgIG1lLmhhc0N1c3RvbWVyID0gZmFsc2U7DQogICAgICB9DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/client/components/product-cart","sourcesContent":["<template>\r\n  <div class=\"cart tw-w-full\">\r\n    <div\r\n      class=\"cart-container tw-w-full tw-mx-auto tw-px-6 tw-bg-white tw-py-4\"\r\n      v-if=\"productCart && productCart.length > 0\"\r\n    >\r\n      <div class=\"cart-header tw-h-12 tw-flex tw-justify-between\">\r\n        <div class=\"header-left tw-text-xl tw-font-semibold\">\r\n          Có {{ productCart.length }} sản phẩm trong giỏ hàng\r\n        </div>\r\n        <div\r\n          class=\"\r\n            header-right\r\n            tw-text-sm tw-cursor-pointer\r\n            hover:tw-text-blue-500\r\n          \"\r\n          @click=\"openFollowOrder\"\r\n        >\r\n          Theo dõi đơn hàng của bạn\r\n        </div>\r\n      </div>\r\n      <div class=\"cart-body\">\r\n        <ProductCart\r\n          v-for=\"item in productCart\"\r\n          :key=\"item.ProductID\"\r\n          :dataItem=\"item\"\r\n        />\r\n        <div class=\"price-area tw-w-full\">\r\n          <div class=\"payment-total tw-p-4 tw-w-2/5 tw-ml-auto\">\r\n            <div class=\"price-total tw-mt-1 tw-flex tw-justify-between\">\r\n              <span>Tổng tiền:</span\r\n              ><span>{{ $commonFn.formatMoney(priceTotal.toString()) }}</span>\r\n            </div>\r\n            <div\r\n              class=\"promotion-price-total tw-mt-1 tw-flex tw-justify-between\"\r\n            >\r\n              <span>Giảm:</span\r\n              ><span>{{\r\n                promotionPrice !== 0\r\n                  ? \"- \" +\r\n                    $commonFn.formatMoney(\r\n                      (priceTotal - promotionPrice).toString()\r\n                    )\r\n                  : 0\r\n              }}</span>\r\n            </div>\r\n            <div\r\n              class=\"payment tw-mt-1 tw-flex tw-justify-between tw-font-bold\"\r\n            >\r\n              <span>Cần thanh toán:</span>\r\n              <span>{{\r\n                promotionPrice !== 0\r\n                  ? $commonFn.formatMoney(promotionPrice.toString())\r\n                  : $commonFn.formatMoney(priceTotal.toString())\r\n              }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"order-form tw-w-4/5 tw-mt-6\">\r\n          <el-form\r\n            :model=\"modelForm\"\r\n            :rules=\"rules\"\r\n            ref=\"ruleForm\"\r\n            label-width=\"120px\"\r\n            label-position=\"top\"\r\n            class=\"demo-ruleForm\"\r\n          >\r\n            <el-form-item prop=\"Gender\">\r\n              <el-radio-group v-model=\"modelForm.Gender\">\r\n                <el-radio :label=\"0\">Anh</el-radio>\r\n                <el-radio :label=\"1\">Chị</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n            <div class=\"tw-flex tw-justify-between\">\r\n              <el-form-item\r\n                class=\"tw-flex-1 tw-mr-4\"\r\n                :label=\"$t('Input.FullName')\"\r\n                prop=\"FullName\"\r\n              >\r\n                <el-input\r\n                  v-model=\"modelForm.FullName\"\r\n                  :placeholder=\"$t('Input.FullNameInput')\"\r\n                />\r\n              </el-form-item>\r\n              <el-form-item\r\n                class=\"tw-w-52\"\r\n                :label=\"$t('Input.PhoneNumber')\"\r\n                prop=\"PhoneNumber\"\r\n              >\r\n                <el-input\r\n                  v-model=\"modelForm.PhoneNumber\"\r\n                  :placeholder=\"$t('Input.PhoneNumberInput')\"\r\n                  @change=\"changePhoneNumber\"\r\n                />\r\n              </el-form-item>\r\n            </div>\r\n            <el-form-item :label=\"$t('Input.Email')\" prop=\"Email\">\r\n              <el-input\r\n                v-model=\"modelForm.Email\"\r\n                :placeholder=\"$t('Input.EmailInput')\"\r\n              />\r\n            </el-form-item>\r\n            <el-form-item\r\n              :label=\"$t('Input.DeliveryAddress')\"\r\n              prop=\"DeliveryAddress\"\r\n            >\r\n              <el-input\r\n                v-model=\"modelForm.DeliveryAddress\"\r\n                :placeholder=\"$t('Input.DeliveryAddressInput')\"\r\n              />\r\n            </el-form-item>\r\n            <el-form-item :label=\"$t('Input.Note')\" prop=\"Note\">\r\n              <el-input\r\n                type=\"textarea\"\r\n                v-model=\"modelForm.Note\"\r\n                :placeholder=\"$t('Input.NoteInput')\"\r\n              />\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n      <div class=\"cart-footer mt-4 tw-pt-5 tw-text-center\">\r\n        <el-button class=\"order-btn\" @click=\"orderProduct\"\r\n          >Hoàn tất đặt hàng</el-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <EmptyCart v-else />\r\n    <SucessPopup\r\n      :customer=\"customer\"\r\n      :productCart=\"productCartSuccess\"\r\n      ref=\"popup\"\r\n      v-if=\"showSuccess\"\r\n      @closePopup=\"closePopup\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ProductCart from \"@/components/client/views/product-cart/product-info.vue\";\r\nimport EmptyCart from \"@/components/client/views/product-cart/data-empty.vue\";\r\nimport SucessPopup from \"@/components/client/views/product-cart/sucess-popup\";\r\nimport { mapState, mapActions, mapMutations } from \"vuex\";\r\nexport default {\r\n  components: {\r\n    ProductCart,\r\n    EmptyCart,\r\n    SucessPopup,\r\n  },\r\n  data() {\r\n    return {\r\n      modelForm: {\r\n        Gender: 0,\r\n      },\r\n      rules: {\r\n        FullName: [\r\n          { required: true, message: \"Hãy nhập thông tin!\", trigger: \"blur\" },\r\n          { min: 3, message: \"Tên tối thiểu 3 kí tự\", trigger: \"blur\" },\r\n        ],\r\n        PhoneNumber: [\r\n          { required: true, message: \"Hãy nhập thông tin!\", trigger: \"blur\" },\r\n        ],\r\n        Gender: [\r\n          { required: true, message: \"Hãy nhập thông tin!\", trigger: \"blur\" },\r\n        ],\r\n        Email: [\r\n          // {validator:validateEmail,trigger: 'blur'}\r\n        ],\r\n        DeliveryAddress: [\r\n          { required: true, message: \"Hãy nhập thông tin!\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      showSuccess: false,\r\n      productCartSuccess: null,\r\n      hasCustomer: false,\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(\"cart\", [\"productCart\", \"productCartLength\"]),\r\n    ...mapState(\"customer\", [\"customer\"]),\r\n\r\n    /**\r\n     * Tổng tiền\r\n     */\r\n    priceTotal() {\r\n      const me = this;\r\n      return me.productCart.reduce((total, current) => {\r\n        return (\r\n          total +\r\n          current.ProductAttributes[0].Price *\r\n            current.ProductAttributes[0].Quantity\r\n        );\r\n      }, 0);\r\n    },\r\n    /**\r\n     * Tổng tiền\r\n     */\r\n    promotionPrice() {\r\n      const me = this;\r\n      return me.productCart.reduce((total, current) => {\r\n        return (\r\n          total +\r\n          current.ProductAttributes[0].PromotionPrice *\r\n            current.ProductAttributes[0].Quantity\r\n        );\r\n      }, 0);\r\n    },\r\n  },\r\n  created() {\r\n    const me = this;\r\n\r\n    if (\r\n      me.productCart.length === 0 &&\r\n      localStorage.getItem(\"productCart\") != \"\" &&\r\n      localStorage.getItem(\"productCart\") != null\r\n    ) {\r\n      me.setProductCart(JSON.parse(localStorage.getItem(\"productCart\")));\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations(\"cart\", [\"setProductCartLength\", \"setProductCart\"]),\r\n    ...mapActions(\"order\", [\"insertOrder\"]),\r\n    ...mapActions(\"customer\", [\r\n      \"getCustomerByPhoneNumber\",\r\n      \"insertCustomer\",\r\n      \"updateCustomer\",\r\n    ]),\r\n    orderProduct() {\r\n      const me = this;\r\n      me.$refs[\"ruleForm\"].validate(async (valid) => {\r\n        if (valid) {\r\n          const h = this.$createElement;\r\n          // await me.getCustomerByPhoneNumber({\r\n          //   phoneNumber: me.modelForm.PhoneNumber,\r\n          // });\r\n\r\n          if (!me.hasCustomer) {\r\n            const paramCustomer = {\r\n              CustomerName: me.modelForm.FullName,\r\n              Email: me.modelForm.Email,\r\n              PhoneNumber: me.modelForm.PhoneNumber,\r\n              Gender:\r\n                me.modelForm.Gender === 0\r\n                  ? me.$enumeration.Gender.Male\r\n                  : me.$enumeration.Gender.FeMale,\r\n            };\r\n            const h = this.$createElement;\r\n            await me\r\n              .insertCustomer(paramCustomer)\r\n              .then(async (res) => {\r\n                if (res) {\r\n                  await me.getCustomerByPhoneNumber({\r\n                    phoneNumber: me.modelForm.PhoneNumber,\r\n                  });\r\n                  await me.insertNewOrder()\r\n                } else {\r\n                  this.$notify.error({\r\n                    title: me.$t(\"Notify.Error\"),\r\n                    message: h(\r\n                      \"i\",\r\n                      { style: \"color: teal\" },\r\n                      me.$t(\"Notify.HasError\")\r\n                    ),\r\n                  });\r\n                }\r\n              })\r\n              .catch((e) => {\r\n                this.$notify.error({\r\n                  title: me.$t(\"Notify.Error\"),\r\n                  message: h(\r\n                    \"i\",\r\n                    { style: \"color: teal\" },\r\n                    me.$t(\"Notify.HasError\")\r\n                  ),\r\n                });\r\n              });\r\n          } else {\r\n            let typeChange = 0;\r\n            let message = \"Bạn có muốn cập nhật thông tin\";\r\n            if (me.modelForm.FullName !== me.customer.CustomerName) {\r\n              message += \" <b>Tên khách hàng</b>,\";\r\n            }\r\n            if (me.modelForm.Gender !== Number(me.customer.Gender)) {\r\n              message += \" <b>Giới tính</b>,\";\r\n            }\r\n            if (me.modelForm.Email !== me.customer.Email) {\r\n              message += \" <b>Email</b>,\";\r\n            }\r\n            if (\r\n              me.modelForm.FullName !== me.customer.CustomerName ||\r\n              me.modelForm.Gender !== Number(me.customer.Gender) ||\r\n              me.modelForm.Email !== me.customer.Email\r\n            ) {\r\n              typeChange = 1;\r\n            }\r\n            message = message.slice(0, message.length - 1);\r\n            message += \" đã thay đổi không?\";\r\n            if (typeChange === 1) {\r\n              this.$confirm(message, \"Thông tin\", {\r\n                confirmButtonText: \"Đồng ý\",\r\n                cancelButtonText: \"Hủy\",\r\n                type: \"info\",\r\n                dangerouslyUseHTMLString: true,\r\n              }).then(async () => {\r\n                me.modelForm.Gender = !!me.modelForm.Gender;\r\n                const params = {\r\n                  id: me.customer.CustomerID,\r\n                  customer: me.modelForm,\r\n                };\r\n                await me\r\n                  .updateCustomer(params)\r\n                  .then(async (res) => {\r\n                    const h = this.$createElement;\r\n                    console.log(res);\r\n                    if (res.MISACode === \"MISA-004\") {\r\n                      this.$notify.error({\r\n                        title: me.$t(\"Notify.Error\"),\r\n                        message: h(\r\n                          \"i\",\r\n                          { style: \"color: teal\" },\r\n                          me.$t(\"Notify.HasError\")\r\n                        ),\r\n                      });\r\n                    } else {\r\n                      await me.getCustomerByPhoneNumber({\r\n                        phoneNumber: me.modelForm.PhoneNumber,\r\n                      });\r\n                      await me.insertNewOrder()\r\n                    }\r\n                  })\r\n                  .catch(() => {\r\n                    const h = this.$createElement;\r\n\r\n                    this.$notify.error({\r\n                      title: me.$t(\"Notify.Error\"),\r\n                      message: h(\r\n                        \"i\",\r\n                        { style: \"color: teal\" },\r\n                        me.$t(\"Notify.HasError\")\r\n                      ),\r\n                    });\r\n                  });\r\n              });\r\n            }else{\r\n              await me.insertNewOrder()\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    async insertNewOrder(){\r\n      const me=this\r\n      const h = this.$createElement;\r\n      var params = {\r\n                    order: {\r\n                      CustomerID: me.customer.CustomerID,\r\n                      TotalPrice: me.promotionPrice,\r\n                      DeliveryAddress: me.modelForm.DeliveryAddress,\r\n                      Note: me.modelForm.Note,\r\n                    },\r\n                    orderDetails: [\r\n                      ...me.productCart.map((item) => {\r\n                        return {\r\n                          ProductAttributeID:\r\n                            item.ProductAttributes[0].ProductAttributeID,\r\n                          Quantity: item.ProductAttributes[0].Quantity,\r\n                          UnitPrice: item.ProductAttributes[0].PromotionPrice\r\n                            ? item.ProductAttributes[0].PromotionPrice\r\n                            : item.ProductAttributes[0].Price,\r\n                        };\r\n                      }),\r\n                    ],\r\n                  };\r\n                  await me\r\n                    .insertOrder(params)\r\n                    .then((res) => {\r\n                      if (res) {\r\n                        me.$notify({\r\n                          title: me.$t(\"Notify.Success\"),\r\n                          message: h(\r\n                            \"i\",\r\n                            { style: \"color: teal\" },\r\n                            me.$t(\"Notify.InsertSuccess\", {\r\n                              object: \"đơn hàng\",\r\n                            })\r\n                          ),\r\n                          type: \"success\",\r\n                        });\r\n                        me.productCartSuccess = JSON.parse(\r\n                          JSON.stringify(me.productCart)\r\n                        );\r\n                        me.setProductCart([]);\r\n                        me.setProductCartLength(0);\r\n                        localStorage.setItem(\"productCart\", JSON.stringify([]));\r\n                        localStorage.setItem(\"productCartLength\", 0);\r\n                        me.showSuccess = true;\r\n                        me.$nextTick(() => {\r\n                          console.log(\"next\");\r\n                          me.$refs.popup.setModel(true);\r\n                        });\r\n                      } else {\r\n                        me.$notify({\r\n                          title: me.$t(\"Notify.Error\"),\r\n                          message: h(\r\n                            \"i\",\r\n                            { style: \"color: teal\" },\r\n                            me.$t(\"Notify.HasError\")\r\n                          ),\r\n                          type: \"error\",\r\n                        });\r\n                      }\r\n                    })\r\n                    .catch((e) => {\r\n                      me.$notify({\r\n                        title: me.$t(\"Notify.Error\"),\r\n                        message: h(\r\n                          \"i\",\r\n                          { style: \"color: teal\" },\r\n                          me.$t(\"Notify.HasError\")\r\n                        ),\r\n                        type: \"error\",\r\n                      });\r\n                    });\r\n    },\r\n\r\n    closePopup() {\r\n      const me = this;\r\n      me.showSuccess = false;\r\n    },\r\n    /**\r\n     * Mở form theo dõi đơn hàng\r\n     */\r\n    openFollowOrder() {\r\n      const me = this;\r\n      me.$router.push(\"/follow-order\");\r\n    },\r\n    async changePhoneNumber() {\r\n      const me = this;\r\n      if (me.modelForm.PhoneNumber || me.modelForm.PhoneNumber !== \"\") {\r\n        await me.getCustomerByPhoneNumber({\r\n          phoneNumber: me.modelForm.PhoneNumber,\r\n        });\r\n        if(me.customer){\r\n          me.modelForm = JSON.parse(JSON.stringify(me.customer));\r\n        me.modelForm.Gender = me.modelForm.Gender ? 1 : 0;\r\n        me.modelForm.FullName = me.modelForm.CustomerName;\r\n        me.hasCustomer = true;\r\n        }\r\n        \r\n      } else {\r\n        me.hasCustomer = false;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.order-btn {\r\n  @apply tw-bg-red-500 tw-text-white !important;\r\n}\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n@import \"@/styles/mixins/mixins.scss\";\r\n\r\n.cart-container {\r\n  .cart-header {\r\n    border-bottom: $default-border;\r\n  }\r\n  .cart-body {\r\n    .order-form {\r\n      .fullname,\r\n      .phone-number {\r\n        width: calc(50% - 8px);\r\n      }\r\n    }\r\n    .price-area {\r\n      border-bottom: $default-border;\r\n      .payment-total {\r\n        font-size: 13px;\r\n      }\r\n    }\r\n  }\r\n  .cart-footer {\r\n    border-top: $default-border;\r\n  }\r\n}\r\n</style>"]}]}