{"remainingRequest":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\components\\product-cart\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\components\\product-cart\\index.vue","mtime":1652529951246},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUHJvZHVjdENhcnQgZnJvbSAiQC9jb21wb25lbnRzL2NsaWVudC92aWV3cy9wcm9kdWN0LWNhcnQvcHJvZHVjdC1pbmZvLnZ1ZSI7DQppbXBvcnQgRW1wdHlDYXJ0IGZyb20gIkAvY29tcG9uZW50cy9jbGllbnQvdmlld3MvcHJvZHVjdC1jYXJ0L2RhdGEtZW1wdHkudnVlIjsNCmltcG9ydCBTdWNlc3NQb3B1cCBmcm9tICJAL2NvbXBvbmVudHMvY2xpZW50L3ZpZXdzL3Byb2R1Y3QtY2FydC9zdWNlc3MtcG9wdXAiOw0KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEFjdGlvbnMsIG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgUHJvZHVjdENhcnQsDQogICAgRW1wdHlDYXJ0LA0KICAgIFN1Y2Vzc1BvcHVwLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBtb2RlbEZvcm06IHt9LA0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgRnVsbE5hbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAiSMOjeSBuaOG6rXAgdGjDtG5nIHRpbiEiLCB0cmlnZ2VyOiAiYmx1ciIgfSwNCiAgICAgICAgICB7IG1pbjogMywgbWVzc2FnZTogIlTDqm4gdOG7kWkgdGhp4buDdSAzIGvDrSB04buxIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgIF0sDQogICAgICAgIFBob25lTnVtYmVyOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIkjDo3kgbmjhuq1wIHRow7RuZyB0aW4hIiwgdHJpZ2dlcjogImJsdXIiIH0sDQogICAgICAgIF0sDQogICAgICAgIEdlbmRlcjogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICJIw6N5IG5o4bqtcCB0aMO0bmcgdGluISIsIHRyaWdnZXI6ICJibHVyIiB9LA0KICAgICAgICBdLA0KICAgICAgICBFbWFpbDogWw0KICAgICAgICAgIC8vIHt2YWxpZGF0b3I6dmFsaWRhdGVFbWFpbCx0cmlnZ2VyOiAnYmx1cid9DQogICAgICAgIF0sDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwU3RhdGUoImNhcnQiLCBbInByb2R1Y3RDYXJ0IiwgInByb2R1Y3RDYXJ0TGVuZ3RoIl0pLA0KICAgIC4uLm1hcFN0YXRlKCJjdXN0b21lciIsIFsiY3VzdG9tZXIiXSksDQoNCiAgICAvKioNCiAgICAgKiBU4buVbmcgdGnhu4FuDQogICAgICovDQogICAgcHJpY2VUb3RhbCgpIHsNCiAgICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICAgIHJldHVybiBtZS5wcm9kdWN0Q2FydC5yZWR1Y2UoKHRvdGFsLCBjdXJyZW50KSA9PiB7DQogICAgICAgIGRlYnVnZ2VyDQogICAgICAgIHJldHVybiB0b3RhbCArIChjdXJyZW50LlByb2R1Y3RBdHRyaWJ1dGVzWzBdLlByaWNlKmN1cnJlbnQuUHJvZHVjdEF0dHJpYnV0ZXNbMF0uUXVhbnRpdHkpOw0KICAgICAgfSwgMCk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiBU4buVbmcgdGnhu4FuDQogICAgICovDQogICAgcHJvbW90aW9uUHJpY2UoKSB7DQogICAgICBjb25zdCBtZSA9IHRoaXM7DQogICAgICByZXR1cm4gbWUucHJvZHVjdENhcnQucmVkdWNlKCh0b3RhbCwgY3VycmVudCkgPT4gew0KICAgICAgICByZXR1cm4gdG90YWwgKyBjdXJyZW50LlByb2R1Y3RBdHRyaWJ1dGVzWzBdLlByb21vdGlvblByaWNlKmN1cnJlbnQuUHJvZHVjdEF0dHJpYnV0ZXNbMF0uUXVhbnRpdHk7DQogICAgICB9LCAwKTsNCiAgICB9LA0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIGNvbnN0IG1lID0gdGhpczsNCg0KICAgIGlmICgNCiAgICAgIG1lLnByb2R1Y3RDYXJ0Lmxlbmd0aCA9PT0gMCAmJg0KICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInByb2R1Y3RDYXJ0IikgIT0gIiIgJiYNCiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJwcm9kdWN0Q2FydCIpICE9IG51bGwNCiAgICApIHsNCiAgICAgIG1lLnNldFByb2R1Y3RDYXJ0KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInByb2R1Y3RDYXJ0IikpKTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBNdXRhdGlvbnMoImNhcnQiLCBbInNldFByb2R1Y3RDYXJ0TGVuZ3RoIiwgInNldFByb2R1Y3RDYXJ0Il0pLA0KICAgIC4uLm1hcEFjdGlvbnMoIm9yZGVyIiwgWyJpbnNlcnRPcmRlciJdKSwNCiAgICAuLi5tYXBBY3Rpb25zKCJjdXN0b21lciIsIFsiZ2V0Q3VzdG9tZXJCeVBob25lTnVtYmVyIiwgImluc2VydEN1c3RvbWVyIl0pLA0KICAgIG9yZGVyUHJvZHVjdCgpIHsNCiAgICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICAgIG1lLiRyZWZzWyJydWxlRm9ybSJdLnZhbGlkYXRlKGFzeW5jICh2YWxpZCkgPT4gew0KICAgICAgICBpZiAodmFsaWQpIHsNCiAgICAgICAgICBjb25zdCBoID0gdGhpcy4kY3JlYXRlRWxlbWVudDsNCiAgICAgICAgICBhd2FpdCBtZS5nZXRDdXN0b21lckJ5UGhvbmVOdW1iZXIoew0KICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG1lLm1vZGVsRm9ybS5QaG9uZU51bWJlciwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICBpZiAoIW1lLmN1c3RvbWVyKSB7DQogICAgICAgICAgICBjb25zdCBwYXJhbUN1c3RvbWVyID0gew0KICAgICAgICAgICAgICBDdXN0b21lck5hbWU6IG1lLm1vZGVsRm9ybS5GdWxsTmFtZSwNCiAgICAgICAgICAgICAgRW1haWw6IG1lLm1vZGVsRm9ybS5FbWFpbCwNCiAgICAgICAgICAgICAgUGhvbmVOdW1iZXI6IG1lLm1vZGVsRm9ybS5QaG9uZU51bWJlciwNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGF3YWl0IG1lDQogICAgICAgICAgICAgIC5pbnNlcnRDdXN0b21lcihwYXJhbUN1c3RvbWVyKQ0KICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlcykgew0KICAgICAgICAgICAgICAgICAgbWUuZ2V0Q3VzdG9tZXJCeVBob25lTnVtYmVyKHsNCiAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG1lLm1vZGVsRm9ybS5QaG9uZU51bWJlciwNCiAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3Ioew0KICAgICAgICAgICAgICAgICAgICB0aXRsZTogbWUuJHQoIk5vdGlmeS5FcnJvciIpLA0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBoKA0KICAgICAgICAgICAgICAgICAgICAgICJpIiwNCiAgICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiAiY29sb3I6IHRlYWwiIH0sDQogICAgICAgICAgICAgICAgICAgICAgbWUuJHQoIk5vdGlmeS5IYXNFcnJvciIpDQogICAgICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgIC5jYXRjaCgoZSkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7DQogICAgICAgICAgICAgICAgICB0aXRsZTogbWUuJHQoIk5vdGlmeS5FcnJvciIpLA0KICAgICAgICAgICAgICAgICAgbWVzc2FnZTogaCgNCiAgICAgICAgICAgICAgICAgICAgImkiLA0KICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiAiY29sb3I6IHRlYWwiIH0sDQogICAgICAgICAgICAgICAgICAgIG1lLiR0KCJOb3RpZnkuSGFzRXJyb3IiKQ0KICAgICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHZhciBwYXJhbXMgPSB7DQogICAgICAgICAgICBvcmRlcjogew0KICAgICAgICAgICAgICBDdXN0b21lcklEOiBtZS5jdXN0b21lci5DdXN0b21lcklELA0KICAgICAgICAgICAgICBUb3RhbFByaWNlOiBtZS5wcm9tb3Rpb25QcmljZSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBvcmRlckRldGFpbHM6IFsNCiAgICAgICAgICAgICAgLi4ubWUucHJvZHVjdENhcnQubWFwKChpdGVtKSA9PiB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgIFByb2R1Y3RBdHRyaWJ1dGVJRDoNCiAgICAgICAgICAgICAgICAgICAgaXRlbS5Qcm9kdWN0QXR0cmlidXRlc1swXS5Qcm9kdWN0QXR0cmlidXRlSUQsDQogICAgICAgICAgICAgICAgICBRdWFudGl0eTogaXRlbS5RdWFudGl0eSwNCiAgICAgICAgICAgICAgICAgIFVuaXRQcmljZTogaXRlbS5Qcm9kdWN0QXR0cmlidXRlc1swXS5Qcm9tb3Rpb25QcmljZSwNCiAgICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICB9KSwNCiAgICAgICAgICAgIF0sDQogICAgICAgICAgfTsNCg0KICAgICAgICAgIG1lLmluc2VydE9yZGVyKHBhcmFtcykNCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlcykgew0KICAgICAgICAgICAgICAgIG1lLiRub3RpZnkoew0KICAgICAgICAgICAgICAgICAgdGl0bGU6IG1lLiR0KCJOb3RpZnkuU3VjY2VzcyIpLA0KICAgICAgICAgICAgICAgICAgbWVzc2FnZTogaCgNCiAgICAgICAgICAgICAgICAgICAgImkiLA0KICAgICAgICAgICAgICAgICAgICB7IHN0eWxlOiAiY29sb3I6IHRlYWwiIH0sDQogICAgICAgICAgICAgICAgICAgIG1lLiR0KCJOb3RpZnkuSW5zZXJ0U3VjY2VzcyIsIHsgb2JqZWN0OiAixJHGoW4gaMOgbmciIH0pDQogICAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIG1lLiRub3RpZnkoew0KICAgICAgICAgICAgICAgICAgdGl0bGU6IG1lLiR0KCJOb3RpZnkuRXJyb3IiKSwNCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGgoDQogICAgICAgICAgICAgICAgICAgICJpIiwNCiAgICAgICAgICAgICAgICAgICAgeyBzdHlsZTogImNvbG9yOiB0ZWFsIiB9LA0KICAgICAgICAgICAgICAgICAgICBtZS4kdCgiTm90aWZ5Lkhhc0Vycm9yIikNCiAgICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7DQogICAgICAgICAgICAgIG1lLiRub3RpZnkoew0KICAgICAgICAgICAgICAgIHRpdGxlOiBtZS4kdCgiTm90aWZ5LkVycm9yIiksDQogICAgICAgICAgICAgICAgbWVzc2FnZTogaCgNCiAgICAgICAgICAgICAgICAgICJpIiwNCiAgICAgICAgICAgICAgICAgIHsgc3R5bGU6ICJjb2xvcjogdGVhbCIgfSwNCiAgICAgICAgICAgICAgICAgIG1lLiR0KCJOb3RpZnkuSGFzRXJyb3IiKQ0KICAgICAgICAgICAgICAgICksDQogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicHJvZHVjdENhcnQiLCBbXSk7DQogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInByb2R1Y3RDYXJ0TGVuZ3RoIiwgMCk7DQogICAgICAgICAgbWUuJHJlZnMucG9wdXAuc2V0TW9kZWwodHJ1ZSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgYWxlcnQoInYiKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/client/components/product-cart","sourcesContent":["<template>\r\n  <div class=\"cart tw-w-full\">\r\n    <div\r\n      class=\"cart-container tw-w-full tw-mx-auto tw-px-6 tw-bg-white tw-py-4\"\r\n      v-if=\"productCart && productCart.length > 0\"\r\n    >\r\n      <div class=\"cart-header tw-h-12 tw-text-xl tw-font-semibold\">\r\n        Có {{ productCart.length }} sản phẩm trong giỏ hàng\r\n      </div>\r\n      <div class=\"cart-body\">\r\n        <ProductCart\r\n          v-for=\"item in productCart\"\r\n          :key=\"item.ProductID\"\r\n          :dataItem=\"item\"\r\n        />\r\n        <div class=\"price-area tw-w-full\">\r\n          <div class=\"payment-total tw-p-4 tw-w-2/5 tw-ml-auto\">\r\n            <div class=\"price-total tw-mt-1 tw-flex tw-justify-between\">\r\n              <span>Tổng tiền:</span\r\n              ><span>{{ $commonFn.formatMoney(priceTotal.toString()) }}</span>\r\n            </div>\r\n            <div\r\n              class=\"promotion-price-total tw-mt-1 tw-flex tw-justify-between\"\r\n            >\r\n              <span>Giảm:</span\r\n              ><span\r\n                >{{ promotionPrice !== 0 ? \"- \" : \"\"\r\n                }}{{\r\n                  $commonFn.formatMoney(\r\n                    (priceTotal - promotionPrice).toString()\r\n                  )\r\n                }}</span\r\n              >\r\n            </div>\r\n            <div\r\n              class=\"payment tw-mt-1 tw-flex tw-justify-between tw-font-bold\"\r\n            >\r\n              <span>Cần thanh toán:</span>\r\n              <span>{{\r\n                $commonFn.formatMoney(promotionPrice.toString())\r\n              }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"order-form tw-w-4/5 tw-mt-6\">\r\n          <el-form\r\n            :model=\"modelForm\"\r\n            :rules=\"rules\"\r\n            ref=\"ruleForm\"\r\n            label-width=\"120px\"\r\n            label-position=\"top\"\r\n            class=\"demo-ruleForm\"\r\n          >\r\n            <el-form-item prop=\"Gender\">\r\n              <el-radio v-model=\"modelForm.Gender\" :label=\"0\">Anh</el-radio>\r\n              <el-radio v-model=\"modelForm.Gender\" :label=\"1\">Chị</el-radio>\r\n            </el-form-item>\r\n            <div class=\"tw-flex tw-justify-between\">\r\n              <el-form-item\r\n                class=\"tw-flex-1 tw-mr-4\"\r\n                :label=\"$t('Input.FullName')\"\r\n                prop=\"FullName\"\r\n              >\r\n                <el-input\r\n                  v-model=\"modelForm.FullName\"\r\n                  :placeholder=\"$t('Input.FullNameInput')\"\r\n                />\r\n              </el-form-item>\r\n              <el-form-item\r\n                class=\"tw-w-52\"\r\n                :label=\"$t('Input.PhoneNumber')\"\r\n                prop=\"PhoneNumber\"\r\n              >\r\n                <el-input\r\n                  v-model=\"modelForm.PhoneNumber\"\r\n                  :placeholder=\"$t('Input.PhoneNumberInput')\"\r\n                />\r\n              </el-form-item>\r\n            </div>\r\n            <el-form-item :label=\"$t('Input.Email')\" prop=\"Email\">\r\n              <el-input\r\n                v-model=\"modelForm.Email\"\r\n                :placeholder=\"$t('Input.EmailInput')\"\r\n              />\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n      <div class=\"cart-footer mt-4 tw-pt-5 tw-text-center\">\r\n        <el-button class=\"order-btn\" @click=\"orderProduct\"\r\n          >Hoàn tất đặt hàng</el-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <EmptyCart v-else />\r\n    <SucessPopup :customer=\"customer\" :productCart=\"productCart\" ref=\"popup\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ProductCart from \"@/components/client/views/product-cart/product-info.vue\";\r\nimport EmptyCart from \"@/components/client/views/product-cart/data-empty.vue\";\r\nimport SucessPopup from \"@/components/client/views/product-cart/sucess-popup\";\r\nimport { mapState, mapActions, mapMutations } from \"vuex\";\r\nexport default {\r\n  components: {\r\n    ProductCart,\r\n    EmptyCart,\r\n    SucessPopup,\r\n  },\r\n  data() {\r\n    return {\r\n      modelForm: {},\r\n      rules: {\r\n        FullName: [\r\n          { required: true, message: \"Hãy nhập thông tin!\", trigger: \"blur\" },\r\n          { min: 3, message: \"Tên tối thiểu 3 kí tự\", trigger: \"blur\" },\r\n        ],\r\n        PhoneNumber: [\r\n          { required: true, message: \"Hãy nhập thông tin!\", trigger: \"blur\" },\r\n        ],\r\n        Gender: [\r\n          { required: true, message: \"Hãy nhập thông tin!\", trigger: \"blur\" },\r\n        ],\r\n        Email: [\r\n          // {validator:validateEmail,trigger: 'blur'}\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(\"cart\", [\"productCart\", \"productCartLength\"]),\r\n    ...mapState(\"customer\", [\"customer\"]),\r\n\r\n    /**\r\n     * Tổng tiền\r\n     */\r\n    priceTotal() {\r\n      const me = this;\r\n      return me.productCart.reduce((total, current) => {\r\n        debugger\r\n        return total + (current.ProductAttributes[0].Price*current.ProductAttributes[0].Quantity);\r\n      }, 0);\r\n    },\r\n    /**\r\n     * Tổng tiền\r\n     */\r\n    promotionPrice() {\r\n      const me = this;\r\n      return me.productCart.reduce((total, current) => {\r\n        return total + current.ProductAttributes[0].PromotionPrice*current.ProductAttributes[0].Quantity;\r\n      }, 0);\r\n    },\r\n  },\r\n  created() {\r\n    const me = this;\r\n\r\n    if (\r\n      me.productCart.length === 0 &&\r\n      localStorage.getItem(\"productCart\") != \"\" &&\r\n      localStorage.getItem(\"productCart\") != null\r\n    ) {\r\n      me.setProductCart(JSON.parse(localStorage.getItem(\"productCart\")));\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations(\"cart\", [\"setProductCartLength\", \"setProductCart\"]),\r\n    ...mapActions(\"order\", [\"insertOrder\"]),\r\n    ...mapActions(\"customer\", [\"getCustomerByPhoneNumber\", \"insertCustomer\"]),\r\n    orderProduct() {\r\n      const me = this;\r\n      me.$refs[\"ruleForm\"].validate(async (valid) => {\r\n        if (valid) {\r\n          const h = this.$createElement;\r\n          await me.getCustomerByPhoneNumber({\r\n            phoneNumber: me.modelForm.PhoneNumber,\r\n          });\r\n          if (!me.customer) {\r\n            const paramCustomer = {\r\n              CustomerName: me.modelForm.FullName,\r\n              Email: me.modelForm.Email,\r\n              PhoneNumber: me.modelForm.PhoneNumber,\r\n            };\r\n\r\n            await me\r\n              .insertCustomer(paramCustomer)\r\n              .then((res) => {\r\n                if (res) {\r\n                  me.getCustomerByPhoneNumber({\r\n                    phoneNumber: me.modelForm.PhoneNumber,\r\n                  });\r\n                } else {\r\n                  this.$notify.error({\r\n                    title: me.$t(\"Notify.Error\"),\r\n                    message: h(\r\n                      \"i\",\r\n                      { style: \"color: teal\" },\r\n                      me.$t(\"Notify.HasError\")\r\n                    ),\r\n                  });\r\n                }\r\n              })\r\n              .catch((e) => {\r\n                this.$notify.error({\r\n                  title: me.$t(\"Notify.Error\"),\r\n                  message: h(\r\n                    \"i\",\r\n                    { style: \"color: teal\" },\r\n                    me.$t(\"Notify.HasError\")\r\n                  ),\r\n                });\r\n              });\r\n          }\r\n          var params = {\r\n            order: {\r\n              CustomerID: me.customer.CustomerID,\r\n              TotalPrice: me.promotionPrice,\r\n            },\r\n            orderDetails: [\r\n              ...me.productCart.map((item) => {\r\n                return {\r\n                  ProductAttributeID:\r\n                    item.ProductAttributes[0].ProductAttributeID,\r\n                  Quantity: item.Quantity,\r\n                  UnitPrice: item.ProductAttributes[0].PromotionPrice,\r\n                };\r\n              }),\r\n            ],\r\n          };\r\n\r\n          me.insertOrder(params)\r\n            .then((res) => {\r\n              if (res) {\r\n                me.$notify({\r\n                  title: me.$t(\"Notify.Success\"),\r\n                  message: h(\r\n                    \"i\",\r\n                    { style: \"color: teal\" },\r\n                    me.$t(\"Notify.InsertSuccess\", { object: \"đơn hàng\" })\r\n                  ),\r\n                  type: \"success\",\r\n                });\r\n              } else {\r\n                me.$notify({\r\n                  title: me.$t(\"Notify.Error\"),\r\n                  message: h(\r\n                    \"i\",\r\n                    { style: \"color: teal\" },\r\n                    me.$t(\"Notify.HasError\")\r\n                  ),\r\n                  type: \"error\",\r\n                });\r\n              }\r\n            })\r\n            .catch((e) => {\r\n              me.$notify({\r\n                title: me.$t(\"Notify.Error\"),\r\n                message: h(\r\n                  \"i\",\r\n                  { style: \"color: teal\" },\r\n                  me.$t(\"Notify.HasError\")\r\n                ),\r\n                type: \"error\",\r\n              });\r\n            });\r\n          localStorage.setItem(\"productCart\", []);\r\n          localStorage.setItem(\"productCartLength\", 0);\r\n          me.$refs.popup.setModel(true);\r\n        } else {\r\n          alert(\"v\");\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.order-btn {\r\n  @apply tw-bg-red-500 tw-text-white !important;\r\n}\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n@import \"@/styles/mixins/mixins.scss\";\r\n\r\n.cart-container {\r\n  .cart-header {\r\n    border-bottom: $default-border;\r\n  }\r\n  .cart-body {\r\n    .order-form {\r\n      .fullname,\r\n      .phone-number {\r\n        width: calc(50% - 8px);\r\n      }\r\n    }\r\n    .price-area {\r\n      border-bottom: $default-border;\r\n      .payment-total {\r\n        font-size: 13px;\r\n      }\r\n    }\r\n  }\r\n  .cart-footer {\r\n    border-top: $default-border;\r\n  }\r\n}\r\n</style>"]}]}