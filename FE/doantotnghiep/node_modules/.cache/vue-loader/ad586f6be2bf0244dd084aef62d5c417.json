{"remainingRequest":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\admin\\views\\categories\\popup\\create-category.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\admin\\views\\categories\\popup\\create-category.vue","mtime":1652504363082},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBtYXBTdGF0ZSwgbWFwQWN0aW9ucyB9IGZyb20gInZ1ZXgiOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIHByb3BzOnsNCiAgICAgICAgY2F0ZWdvcnk6ew0KICAgICAgICAgICAgdHlwZTpPYmplY3QsDQogICAgICAgICAgICBkZWZhdWx0OigpPT57fQ0KICAgICAgICB9LA0KICAgICAgICB0eXBlUG9wdXA6ew0KICAgICAgICAgICAgdHlwZTpCb29sZWFuLA0KICAgICAgICAgICAgZGVmYXVsdDp0cnVlDQogICAgICAgIH0NCiAgICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBtb2RlbERpYWxvZzogdHJ1ZSwNCiAgICAgIG1vZGVsRm9ybToge30sDQogICAgICBwcmV2aWV3Om51bGwsDQogICAgICBydWxlczoge30sDQogICAgICBwYWdlSW5kZXg6MSwNCiAgICAgIHBhZ2VTaXplOjEwLA0KICAgICAgc2VhcmNoOicnLA0KICAgICAgcGFyZW50Q2F0ZWdvcnk6JycNCiAgICB9Ow0KICB9LA0KICBjb21wdXRlZDp7DQogICAgLi4ubWFwU3RhdGUoImNhdGVnb3J5IiwgWyJjYXRlZ29yaWVzIl0pLA0KICAgIC8qKg0KICAgICAqIEdpw6EgdHLhu4sgb3B0aW9uIGNo4buNbiBow6NuZyBz4bqjbiB4deG6pXQNCiAgICAgKi8NCiAgICBvcHRpb25DYXRlZ29yaWVzKCkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgcmV0dXJuIG1lLmNhdGVnb3JpZXM/Lm1hcCgoaXRlbSkgPT4gew0KICAgICAgICByZXR1cm4geyB2YWx1ZTogaXRlbS5DYXRlZ29yeUlELCBsYWJlbDogaXRlbS5DYXRlZ29yeU5hbWUgfTsNCiAgICAgIH0pOw0KICAgIH0sDQogIH0sDQpjcmVhdGVkKCl7DQogICAgY29uc3QgbWU9dGhpcw0KICAgIG1lLm1vZGVsRm9ybT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG1lLmNhdGVnb3J5KSkNCiAgICBtZS5nZXRQYXJlbnRDYXRlZ29yaWVzKCkNCn0sDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBBY3Rpb25zKCJjYXRlZ29yeSIsIHtpbnNlcnRDYXRlZ29yeToiaW5zZXJ0Q2F0ZWdvcnkiLHVwZGF0ZUNhdGVnb3J5OiJ1cGRhdGVDYXRlZ29yeSIsZ2V0Q2F0ZWdvcmllc1BhZ2luZzoiZ2V0Q2F0ZWdvcmllc1BhZ2luZyIsZ2V0UGFyZW50Q2F0ZWdvcmllczoiZ2V0Q2F0ZWdvcmllcyJ9KSwNCiAgICBzZXRNb2RlbCh2YWx1ZSkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgbWUubW9kZWxEaWFsb2cgPSB2YWx1ZTsNCiAgICB9LA0KICAgIHNlbGVjdEltYWdlKCkgew0KICAgICAgdGhpcy4kcmVmcy5maWxlLmNsaWNrKCk7DQogICAgfSwNCiAgICBwcmV2aWV3SW1hZ2UoZXZlbnQpIHsNCiAgICAgIHZhciBpbnB1dCA9IGV2ZW50LnRhcmdldDsNCg0KICAgICAgaWYgKGlucHV0LmZpbGVzKSB7DQogICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgICAgICByZWFkZXIub25sb2FkID0gKGUpID0+IHsNCiAgICAgICAgICB0aGlzLnByZXZpZXc9ZS50YXJnZXQucmVzdWx0Ow0KICAgICAgICB9Ow0KDQogICAgICAgIHRoaXMuaW1hZ2UgPSBpbnB1dC5maWxlc1swXTsNCiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5pbWFnZSk7DQogICAgICB9DQogICAgfSwNCiAgICAvKioNCiAgICAgKiBIb8OgbiB0aMOgbmggdGjDqm0gdGjDtG5nIHRpbiBjaGkgdGnhur90IHPhuqNuIHBo4bqpbQ0KICAgICAqLw0KICAgIGFzeW5jIGNvbXBsZXRlRmlsbCgpIHsNCiAgICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICAgIGlmKHRoaXMudHlwZVBvcHVwKXsNCg0KICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobWUubW9kZWxGb3JtKSkNCiAgICAgICAgICBwYXJhbXMuQ3JlYXRlZEJ5PUpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiQWNjb3VudCIpKS5Vc2VyTmFtZQ0KICAgICAgICAgIGNvbnN0IGggPSB0aGlzLiRjcmVhdGVFbGVtZW50Ow0KICAgICAgICAgIGF3YWl0IG1lLmluc2VydENhdGVnb3J5KHBhcmFtcykudGhlbigoKSA9PiB7DQogICAgICAgICAgICAgIG1lLm1vZGVsRm9ybT17fQ0KICAgICAgICAgICAgICANCiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgICAgIHRpdGxlOiBtZS4kdCgiTm90aWZ5LlN1Y2Nlc3MiKSwNCiAgICAgICAgICAgICAgbWVzc2FnZTogaCgNCiAgICAgICAgICAgICAgICAiaSIsDQogICAgICAgICAgICAgICAgeyBzdHlsZTogImNvbG9yOiB0ZWFsIiB9LA0KICAgICAgICAgICAgICAgIG1lLiR0KCJOb3RpZnkuVXBkYXRlU3VjY2VzcyIse29iamVjdDonZGFuaCBt4bulYyd9KQ0KICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIG1lLmdldENhdGVnb3JpZXMobWUucGFnZUluZGV4LG1lLnBhZ2VTaXplLG1lLnNlYXJjaCkNCiAgICAgICAgICB9KS5jYXRjaCgoKT0+ew0KICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsNCiAgICAgICAgICAgICAgICAgIHRpdGxlOiBtZS4kdCgiTm90aWZ5LkVycm9yIiksDQogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBoKA0KICAgICAgICAgICAgICAgICAgICAiaSIsDQogICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6ICJjb2xvcjogdGVhbCIgfSwNCiAgICAgICAgICAgICAgICAgICAgbWUuJHQoIk5vdGlmeS5IYXNFcnJvciIpDQogICAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pOw0KICAgICAgfWVsc2V7DQogICAgICAgICAgY29uc3QgcGFyYW1zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShtZS5tb2RlbEZvcm0pKQ0KICAgICAgICAgIHBhcmFtcy5Nb2RpZmllZEJ5PUpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiQWNjb3VudCIpKS5Vc2VyTmFtZQ0KICAgICAgICAgIGNvbnN0IGggPSB0aGlzLiRjcmVhdGVFbGVtZW50Ow0KICAgICAgICAgIGF3YWl0IG1lLnVwZGF0ZUNhdGVnb3J5KHtwYXJhbXM6cGFyYW1zLGlkOm1lLmNhdGVnb3J5LkNhdGVnb3J5SUR9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAgICAgbWUubW9kZWxGb3JtPXt9DQogICAgICAgICAgICB0aGlzLiRub3RpZnkoew0KICAgICAgICAgICAgICB0aXRsZTogbWUuJHQoIk5vdGlmeS5TdWNjZXNzIiksDQogICAgICAgICAgICAgIG1lc3NhZ2U6IGgoDQogICAgICAgICAgICAgICAgImkiLA0KICAgICAgICAgICAgICAgIHsgc3R5bGU6ICJjb2xvcjogdGVhbCIgfSwNCiAgICAgICAgICAgICAgICBtZS4kdCgiTm90aWZ5Lkluc2VydFN1Y2Nlc3MiLHtvYmplY3Q6J2RhbmggbeG7pWMnfSkNCiAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBtZS5nZXRDYXRlZ29yaWVzKG1lLnBhZ2VJbmRleCxtZS5wYWdlU2l6ZSxtZS5zZWFyY2gpDQogICAgICAgICAgfSkuY2F0Y2goKCk9PnsNCiAgICAgICAgICAgICAgDQogICAgDQogICAgICAgICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsNCiAgICAgICAgICAgICAgICAgIHRpdGxlOiBtZS4kdCgiTm90aWZ5LkVycm9yIiksDQogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBoKA0KICAgICAgICAgICAgICAgICAgICAiaSIsDQogICAgICAgICAgICAgICAgICAgIHsgc3R5bGU6ICJjb2xvcjogdGVhbCIgfSwNCiAgICAgICAgICAgICAgICAgICAgbWUuJHQoIk5vdGlmeS5IYXNFcnJvciIpDQogICAgICAgICAgICAgICAgICApLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICBtZS5tb2RlbERpYWxvZyA9IGZhbHNlOw0KICAgIH0sDQogICAgLyoqDQogICAgICogSOG7p3kgdGjDqm0gdGjDtG4gZ3RpbiBjaGkgdGnhur90IHPhuqNuIHBo4bqpbQ0KICAgICAqLw0KICAgIGNhbmNlbEZpbGwoKSB7DQogICAgICBjb25zdCBtZSA9IHRoaXM7DQogICAgICBtZS5tb2RlbERpYWxvZyA9IGZhbHNlOw0KICAgICAgbWUuJGVtaXQoJ2Nsb3NlUG9wdXAnKQ0KICAgIH0sDQogICAgZ2V0Q2F0ZWdvcmllcyhwYWdlSW5kZXgscGFnZVNpemUscXVlcnlUZXh0KXsNCiAgICAgIGNvbnN0IG1lPXRoaXMNCiAgICAgIGNvbnN0IHBhcmFtcz17DQogICAgICAgIHBhZ2VJbmRleDpwYWdlSW5kZXgsDQogICAgICAgIHBhZ2VTaXplOnBhZ2VTaXplLA0KICAgICAgICBxdWVyeVRleHQ6cXVlcnlUZXh0DQogICAgICB9DQogICAgICBtZS5nZXRDYXRlZ29yaWVzUGFnaW5nKHBhcmFtcyk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["create-category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"create-category.vue","sourceRoot":"src/components/admin/views/categories/popup","sourcesContent":["<template>\r\n  <el-dialog\r\n    ref=\"dialog\"\r\n    title=\"Thêm mới danh mục sản phẩm\"\r\n    :visible.sync=\"modelDialog\"\r\n    @close=\"cancelFill\"\r\n  >\r\n    <template #default>\r\n      <el-form\r\n        :model=\"modelForm\"\r\n        :rules=\"rules\"\r\n        ref=\"ruleForm\"\r\n        label-width=\"130px\"\r\n        label-position=\"left\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <el-form-item\r\n          class=\"tw-flex-1 tw-mr-4\"\r\n          :label=\"$t('Category.CategoryName')\"\r\n          prop=\"CategoryName\"\r\n        >\r\n          <el-input\r\n            v-model=\"modelForm.CategoryName\"\r\n            :placeholder=\"$t('Category.CategoryNameInput')\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item\r\n            class=\"tw-flex-1 tw-mr-4\"\r\n            :label=\"$t('Category.ParentCategory')\"\r\n          >\r\n            <el-select\r\n              v-model=\"modelForm.CategoryParentID\"\r\n              :placeholder=\"$t('Category.ParentCategory')\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in optionCategories\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              >\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item class=\"image-area tw-flex-1 tw-mr-4\" :label=\"$t('Product.Image')\">\r\n            <div class=\"image-icon tw-flex\">\r\n              <img\r\n                width=\"50\"\r\n                height=\"50\"\r\n                :src=\"preview\"\r\n              />\r\n            </div>\r\n            <input\r\n              ref=\"file\"\r\n              type=\"file\"\r\n              hidden\r\n              accept=\".jpg, .jpeg, .png, .gif\"\r\n              @change=\"previewImage\"\r\n            />\r\n            <el-button @click=\"selectImage\">{{$t('Button.SelectImage')}}</el-button>\r\n          </el-form-item>\r\n      </el-form>\r\n    </template>\r\n    <template #footer>\r\n      <div class=\"button\">\r\n        <el-button @click=\"completeFill\" class=\"complete-btn\">{{\r\n          $t(\"Button.Complete\")\r\n        }}</el-button>\r\n        <el-button @click=\"cancelFill\" class=\"cancel-btn\">{{\r\n          $t(\"Button.Cancel\")\r\n        }}</el-button>\r\n      </div>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from \"vuex\";\r\nexport default {\r\n    props:{\r\n        category:{\r\n            type:Object,\r\n            default:()=>{}\r\n        },\r\n        typePopup:{\r\n            type:Boolean,\r\n            default:true\r\n        }\r\n    },\r\n  data() {\r\n    return {\r\n      modelDialog: true,\r\n      modelForm: {},\r\n      preview:null,\r\n      rules: {},\r\n      pageIndex:1,\r\n      pageSize:10,\r\n      search:'',\r\n      parentCategory:''\r\n    };\r\n  },\r\n  computed:{\r\n    ...mapState(\"category\", [\"categories\"]),\r\n    /**\r\n     * Giá trị option chọn hãng sản xuất\r\n     */\r\n    optionCategories() {\r\n      const me = this;\r\n      return me.categories?.map((item) => {\r\n        return { value: item.CategoryID, label: item.CategoryName };\r\n      });\r\n    },\r\n  },\r\ncreated(){\r\n    const me=this\r\n    me.modelForm=JSON.parse(JSON.stringify(me.category))\r\n    me.getParentCategories()\r\n},\r\n  methods: {\r\n    ...mapActions(\"category\", {insertCategory:\"insertCategory\",updateCategory:\"updateCategory\",getCategoriesPaging:\"getCategoriesPaging\",getParentCategories:\"getCategories\"}),\r\n    setModel(value) {\r\n      const me = this;\r\n      me.modelDialog = value;\r\n    },\r\n    selectImage() {\r\n      this.$refs.file.click();\r\n    },\r\n    previewImage(event) {\r\n      var input = event.target;\r\n\r\n      if (input.files) {\r\n        var reader = new FileReader();\r\n        reader.onload = (e) => {\r\n          this.preview=e.target.result;\r\n        };\r\n\r\n        this.image = input.files[0];\r\n        reader.readAsDataURL(this.image);\r\n      }\r\n    },\r\n    /**\r\n     * Hoàn thành thêm thông tin chi tiết sản phẩm\r\n     */\r\n    async completeFill() {\r\n      const me = this;\r\n      if(this.typePopup){\r\n\r\n          const params = JSON.parse(JSON.stringify(me.modelForm))\r\n          params.CreatedBy=JSON.parse(sessionStorage.getItem(\"Account\")).UserName\r\n          const h = this.$createElement;\r\n          await me.insertCategory(params).then(() => {\r\n              me.modelForm={}\r\n              \r\n            this.$notify({\r\n              title: me.$t(\"Notify.Success\"),\r\n              message: h(\r\n                \"i\",\r\n                { style: \"color: teal\" },\r\n                me.$t(\"Notify.UpdateSuccess\",{object:'danh mục'})\r\n              ),\r\n              type: \"success\",\r\n            });\r\n            me.getCategories(me.pageIndex,me.pageSize,me.search)\r\n          }).catch(()=>{\r\n            \r\n                this.$notify.error({\r\n                  title: me.$t(\"Notify.Error\"),\r\n                  message: h(\r\n                    \"i\",\r\n                    { style: \"color: teal\" },\r\n                    me.$t(\"Notify.HasError\")\r\n                  ),\r\n                });\r\n          });\r\n      }else{\r\n          const params = JSON.parse(JSON.stringify(me.modelForm))\r\n          params.ModifiedBy=JSON.parse(sessionStorage.getItem(\"Account\")).UserName\r\n          const h = this.$createElement;\r\n          await me.updateCategory({params:params,id:me.category.CategoryID}).then(() => {\r\n              me.modelForm={}\r\n            this.$notify({\r\n              title: me.$t(\"Notify.Success\"),\r\n              message: h(\r\n                \"i\",\r\n                { style: \"color: teal\" },\r\n                me.$t(\"Notify.InsertSuccess\",{object:'danh mục'})\r\n              ),\r\n              type: \"success\",\r\n            });\r\n            me.getCategories(me.pageIndex,me.pageSize,me.search)\r\n          }).catch(()=>{\r\n              \r\n    \r\n                this.$notify.error({\r\n                  title: me.$t(\"Notify.Error\"),\r\n                  message: h(\r\n                    \"i\",\r\n                    { style: \"color: teal\" },\r\n                    me.$t(\"Notify.HasError\")\r\n                  ),\r\n                });\r\n          });\r\n      }\r\n\r\n      me.modelDialog = false;\r\n    },\r\n    /**\r\n     * Hủy thêm thôn gtin chi tiết sản phẩm\r\n     */\r\n    cancelFill() {\r\n      const me = this;\r\n      me.modelDialog = false;\r\n      me.$emit('closePopup')\r\n    },\r\n    getCategories(pageIndex,pageSize,queryText){\r\n      const me=this\r\n      const params={\r\n        pageIndex:pageIndex,\r\n        pageSize:pageSize,\r\n        queryText:queryText\r\n      }\r\n      me.getCategoriesPaging(params);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.complete-btn {\r\n  @apply tw-bg-red-500 tw-text-white !important;\r\n}\r\n\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n.image-area{\r\n  .el-form-item__content{\r\n    display:flex !important;\r\n  }\r\n}\r\n</style>"]}]}