{"remainingRequest":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\controls\\zoom-image\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\controls\\zoom-image\\index.vue","mtime":1653019439587},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyB0aGlzIGNvbXBvbmVudCBkaXNwbGF5cyBhbiBpbWFnZSB3aXRoIHRoZSB3aWR0aCBvZiB0aGUgcGFyZW50IGVsZW1lbnQgYW5kIG9uIGhvdmVyIHNob3dzDQovLyB0aGUgZnVsbCBpbWFnZSBvciBhIHNjYWxlZCBpbWFnZSBpbiB0aGUgaW1hZ2UgYXJlYS4NCi8vIGZlYXR1cmVzOiBhY3RpdmF0ZS9kZWFjdGl2YXRlIG1ldGhvZCwgYWN0aXZlL2luYWN0aXZlIG9uIGxvYWQsIHNjYWxlIHBhcmFtZXRlciwgc2VwYXJhdGUgem9vbSBpbWFnZSwNCi8vIGV2ZW50IHdoZW4gYWxsIGltYWdlcyBsb2FkZWQsIGV2ZW50IHdoZW4gaW1hZ2VzIHJlc2l6ZWQgKHJlc3BvbnNpdmUgY3NzLCBldGMpDQoNCiBmdW5jdGlvbiBwYWdlT2Zmc2V0KGVsKSB7DQogIC8vIC0+IHt4OiBudW1iZXIsIHk6IG51bWJlcn0NCiAgLy8gZ2V0IHRoZSBsZWZ0IGFuZCB0b3Agb2Zmc2V0IG9mIGEgZG9tIGJsb2NrIGVsZW1lbnQNCiAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwNCiAgICBzY3JvbGxMZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0LA0KICAgIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOw0KICByZXR1cm4gew0KICAgIHk6IHJlY3QudG9wICsgc2Nyb2xsVG9wLA0KICAgIHg6IHJlY3QubGVmdCArIHNjcm9sbExlZnQNCiAgfQ0KfQ0KZXhwb3J0IGRlZmF1bHQgew0KICAgIHByb3BzOiBbImltZ05vcm1hbCIsICJpbWdab29tIiwgInNjYWxlIiwgImRpc2FibGVkIl0sDQogICAgZGF0YTogZnVuY3Rpb24oKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNjYWxlRmFjdG9yOiAxLA0KICAgICAgcmVzaXplQ2hlY2tJbnRlcnZhbDogbnVsbCwNCiAgICAgIHpvb21lZDogZmFsc2UNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICB0b3VjaHpvb206IGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICBpZiAodGhpcy5kaXNhYmxlZCkgcmV0dXJuDQogICAgICB0aGlzLm1vdmUoZXZlbnQpDQogICAgICB0aGlzLnpvb21lZCA9ICF0aGlzLnpvb21lZA0KICAgIH0sDQogICAgem9vbTogZnVuY3Rpb24oKSB7DQogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHRoaXMuem9vbWVkID0gdHJ1ZQ0KICAgIH0sDQogICAgdW56b29tOiBmdW5jdGlvbigpIHsNCiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkgdGhpcy56b29tZWQgPSBmYWxzZQ0KICAgIH0sDQogICAgbW92ZTogZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgZGVidWdnZXINCiAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICF0aGlzLnpvb21lZCkgcmV0dXJuDQogICAgICB2YXIgb2Zmc2V0ID0gcGFnZU9mZnNldCh0aGlzLiRlbCkNCiAgICAgIHZhciB6b29tID0gdGhpcy4kcmVmcy56b29tDQogICAgICB2YXIgbm9ybWFsID0gdGhpcy4kcmVmcy5ub3JtYWwNCiAgICAgIHZhciByZWxhdGl2ZVggPSBldmVudC5jbGllbnRYIC0gb2Zmc2V0LnggKyB3aW5kb3cucGFnZVhPZmZzZXQNCiAgICAgIHZhciByZWxhdGl2ZVkgPSBldmVudC5jbGllbnRZIC0gb2Zmc2V0LnkgKyB3aW5kb3cucGFnZVlPZmZzZXQNCiAgICAgIHZhciBub3JtYWxGYWN0b3JYID0gcmVsYXRpdmVYIC8gbm9ybWFsLm9mZnNldFdpZHRoDQogICAgICB2YXIgbm9ybWFsRmFjdG9yWSA9IHJlbGF0aXZlWSAvIG5vcm1hbC5vZmZzZXRIZWlnaHQNCiAgICAgIHZhciB4ID0gbm9ybWFsRmFjdG9yWCAqICh6b29tLm9mZnNldFdpZHRoICogdGhpcy5zY2FsZUZhY3RvciAtIG5vcm1hbC5vZmZzZXRXaWR0aCkNCiAgICAgIHZhciB5ID0gbm9ybWFsRmFjdG9yWSAqICh6b29tLm9mZnNldEhlaWdodCAqIHRoaXMuc2NhbGVGYWN0b3IgLSBub3JtYWwub2Zmc2V0SGVpZ2h0KQ0KICAgICAgem9vbS5zdHlsZS5sZWZ0ID0gLXggKyAicHgiDQogICAgICB6b29tLnN0eWxlLnRvcCA9IC15ICsgInB4Ig0KICAgIH0sDQogICAgaW5pdEV2ZW50TG9hZGVkOiBmdW5jdGlvbigpIHsNCiAgICAgIC8vIGVtaXQgdGhlICJsb2FkZWQiIGV2ZW50IGlmIGFsbCBpbWFnZXMgaGF2ZSBiZWVuIGxvYWRlZA0KICAgICAgdmFyIHByb21pc2VzID0gW3RoaXMuJHJlZnMuem9vbSwgdGhpcy4kcmVmcy5ub3JtYWxdLm1hcChmdW5jdGlvbihpbWFnZSkgew0KICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIHJlc29sdmUpDQogICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcigiZXJyb3IiLCByZWplY3QpDQogICAgICAgIH0pDQogICAgICB9KQ0KICAgICAgdmFyIGNvbXBvbmVudCA9IHRoaXMNCiAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkgew0KICAgICAgICBjb21wb25lbnQuJGVtaXQoImxvYWRlZCIpDQogICAgICB9KQ0KICAgIH0sDQogICAgaW5pdEV2ZW50UmVzaXplZDogZnVuY3Rpb24oKSB7DQogICAgICB2YXIgbm9ybWFsID0gdGhpcy4kcmVmcy5ub3JtYWwNCiAgICAgIHZhciBwcmV2aW91c1dpZHRoID0gbm9ybWFsLm9mZnNldFdpZHRoDQogICAgICB2YXIgcHJldmlvdXNIZWlnaHQgPSBub3JtYWwub2Zmc2V0SGVpZ2h0DQogICAgICB2YXIgY29tcG9uZW50ID0gdGhpcw0KICAgICAgdGhpcy5yZXNpemVDaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7DQogICAgICAgIGlmICgocHJldmlvdXNXaWR0aCAhPSBub3JtYWwub2Zmc2V0V2lkdGgpIHx8IChwcmV2aW91c0hlaWdodCAhPSBub3JtYWwub2Zmc2V0SGVpZ2h0KSkgew0KICAgICAgICAgIHByZXZpb3VzV2lkdGggPSBub3JtYWwub2Zmc2V0V2lkdGgNCiAgICAgICAgICBwcmV2aW91c0hlaWdodCA9IG5vcm1hbC5vZmZzZXRIZWlnaHQNCiAgICAgICAgICBjb21wb25lbnQuJGVtaXQoInJlc2l6ZWQiLCB7DQogICAgICAgICAgICB3aWR0aDogbm9ybWFsLndpZHRoLA0KICAgICAgICAgICAgaGVpZ2h0OiBub3JtYWwuaGVpZ2h0LA0KICAgICAgICAgICAgZnVsbFdpZHRoOiBub3JtYWwubmF0dXJhbFdpZHRoLA0KICAgICAgICAgICAgZnVsbEhlaWdodDogbm9ybWFsLm5hdHVyYWxIZWlnaHQNCiAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgICB9LCAxMDAwKQ0KICAgIH0sDQogICAgDQogIH0sDQogIG1vdW50ZWQ6IGZ1bmN0aW9uKCkgew0KICAgIGlmICh0aGlzLiRwcm9wcy5zY2FsZSkgew0KICAgICAgdGhpcy5zY2FsZUZhY3RvciA9IHBhcnNlSW50KHRoaXMuJHByb3BzLnNjYWxlKQ0KICAgICAgdGhpcy4kcmVmcy56b29tLnN0eWxlLnRyYW5zZm9ybSA9ICJzY2FsZSgiICsgdGhpcy5zY2FsZUZhY3RvciArICIpIg0KICAgIH0NCiAgICB0aGlzLmluaXRFdmVudExvYWRlZCgpDQogICAgdGhpcy5pbml0RXZlbnRSZXNpemVkKCkNCiAgfSwNCiAgdXBkYXRlZDogZnVuY3Rpb24oKSB7DQogICAgdGhpcy5pbml0RXZlbnRMb2FkZWQoKQ0KICB9LA0KICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbigpIHsNCiAgICB0aGlzLnJlc2l6ZUNoZWNrSW50ZXJ2YWwgJiYgY2xlYXJJbnRlcnZhbCh0aGlzLnJlc2l6ZUNoZWNrSW50ZXJ2YWwpDQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/controls/zoom-image","sourcesContent":["<template>\r\n  <div class=\"zoom-on-hover tw-w-full tw-h-full\" v-bind:class=\"{zoomed}\" @touchstart=\"touchzoom\"\r\n    @mousemove=\"move\" @mouseenter=\"zoom\" @mouseleave=\"unzoom\">\r\n    <img class=\"normal\" ref=\"normal\" :src=\"imgNormal\"/>\r\n    <img class=\"zoom\" ref=\"zoom\" :src=\"imgZoom || imgNormal\"/></div>\r\n</template>\r\n\r\n<script>\r\n// this component displays an image with the width of the parent element and on hover shows\r\n// the full image or a scaled image in the image area.\r\n// features: activate/deactivate method, active/inactive on load, scale parameter, separate zoom image,\r\n// event when all images loaded, event when images resized (responsive css, etc)\r\n\r\n function pageOffset(el) {\r\n  // -> {x: number, y: number}\r\n  // get the left and top offset of a dom block element\r\n  var rect = el.getBoundingClientRect(),\r\n    scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\r\n    scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n  return {\r\n    y: rect.top + scrollTop,\r\n    x: rect.left + scrollLeft\r\n  }\r\n}\r\nexport default {\r\n    props: [\"imgNormal\", \"imgZoom\", \"scale\", \"disabled\"],\r\n    data: function() {\r\n    return {\r\n      scaleFactor: 1,\r\n      resizeCheckInterval: null,\r\n      zoomed: false\r\n    }\r\n  },\r\n  methods: {\r\n    touchzoom: function(event) {\r\n      if (this.disabled) return\r\n      this.move(event)\r\n      this.zoomed = !this.zoomed\r\n    },\r\n    zoom: function() {\r\n      if (!this.disabled) this.zoomed = true\r\n    },\r\n    unzoom: function() {\r\n      if (!this.disabled) this.zoomed = false\r\n    },\r\n    move: function(event) {\r\n        debugger\r\n      if (this.disabled || !this.zoomed) return\r\n      var offset = pageOffset(this.$el)\r\n      var zoom = this.$refs.zoom\r\n      var normal = this.$refs.normal\r\n      var relativeX = event.clientX - offset.x + window.pageXOffset\r\n      var relativeY = event.clientY - offset.y + window.pageYOffset\r\n      var normalFactorX = relativeX / normal.offsetWidth\r\n      var normalFactorY = relativeY / normal.offsetHeight\r\n      var x = normalFactorX * (zoom.offsetWidth * this.scaleFactor - normal.offsetWidth)\r\n      var y = normalFactorY * (zoom.offsetHeight * this.scaleFactor - normal.offsetHeight)\r\n      zoom.style.left = -x + \"px\"\r\n      zoom.style.top = -y + \"px\"\r\n    },\r\n    initEventLoaded: function() {\r\n      // emit the \"loaded\" event if all images have been loaded\r\n      var promises = [this.$refs.zoom, this.$refs.normal].map(function(image) {\r\n        return new Promise(function(resolve, reject) {\r\n          image.addEventListener(\"load\", resolve)\r\n          image.addEventListener(\"error\", reject)\r\n        })\r\n      })\r\n      var component = this\r\n      Promise.all(promises).then(function() {\r\n        component.$emit(\"loaded\")\r\n      })\r\n    },\r\n    initEventResized: function() {\r\n      var normal = this.$refs.normal\r\n      var previousWidth = normal.offsetWidth\r\n      var previousHeight = normal.offsetHeight\r\n      var component = this\r\n      this.resizeCheckInterval = setInterval(function() {\r\n        if ((previousWidth != normal.offsetWidth) || (previousHeight != normal.offsetHeight)) {\r\n          previousWidth = normal.offsetWidth\r\n          previousHeight = normal.offsetHeight\r\n          component.$emit(\"resized\", {\r\n            width: normal.width,\r\n            height: normal.height,\r\n            fullWidth: normal.naturalWidth,\r\n            fullHeight: normal.naturalHeight\r\n          })\r\n        }\r\n      }, 1000)\r\n    },\r\n    \r\n  },\r\n  mounted: function() {\r\n    if (this.$props.scale) {\r\n      this.scaleFactor = parseInt(this.$props.scale)\r\n      this.$refs.zoom.style.transform = \"scale(\" + this.scaleFactor + \")\"\r\n    }\r\n    this.initEventLoaded()\r\n    this.initEventResized()\r\n  },\r\n  updated: function() {\r\n    this.initEventLoaded()\r\n  },\r\n  beforeDestroy: function() {\r\n    this.resizeCheckInterval && clearInterval(this.resizeCheckInterval)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.zoom-on-hover {\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.zoom-on-hover .normal {\r\n  width: 100%;\r\n  height:100%;\r\n}\r\n.zoom-on-hover .zoom {\r\n  position: absolute;\r\n  opacity: 0;\r\n  transform-origin: top left;\r\n}\r\n.zoom-on-hover.zoomed .zoom {\r\n  opacity: 1;\r\n}\r\n.zoom-on-hover.zoomed .normal {\r\n  opacity: 0;\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n  \r\n  \r\n  \r\n"]}]}