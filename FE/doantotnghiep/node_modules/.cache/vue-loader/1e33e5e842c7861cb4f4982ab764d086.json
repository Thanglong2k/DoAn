{"remainingRequest":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\views\\product-detail\\comment\\comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\components\\client\\views\\product-detail\\comment\\comment.vue","mtime":1656042483325},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQXJlYUNhcmQgZnJvbSAiQC9jb21wb25lbnRzL2NvbnRyb2xzL2FyZWEtY2FyZCI7DQppbXBvcnQgQ29tbWVudEN1c3RvbWVySW5mb1BvcHVwIGZyb20gIi4uL3BvcHVwL2N1c3RvbWVyLWluZm8tcG9wdXAudnVlIjsNCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zLCBtYXBNdXRhdGlvbnMgfSBmcm9tICJ2dWV4IjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgY29tcG9uZW50czogew0KICAgIEFyZWFDYXJkLA0KICAgIENvbW1lbnRDdXN0b21lckluZm9Qb3B1cCwNCiAgfSwNCiAgcHJvcHM6IHsNCiAgICBwcm9kdWN0OiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0OiAoKSA9PiB7fSwNCiAgICB9LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBjb21tZW50Q29udGVudDogIiIsDQogICAgICByZXBseUNvbnRlbnQ6ICIiLA0KICAgICAgc2hvd0NvbW1lbnRFcnJvcjogZmFsc2UsDQogICAgICBzaG93UmVwbHlFcnJvcjogZmFsc2UsDQogICAgICBzaG93UmVwbHk6ICcnLA0KICAgICAgcGFnZUluZGV4OiAxLA0KICAgICAgcGFnZVNpemU6IDUsDQogICAgICBjb21tZW50U2VsZWN0ZWRSZXBseTogIiIsDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBTdGF0ZSgiY29tbWVudCIsIFsiY29tbWVudHMiLCAicGFnZVRvdGFsIiwgImNvbW1lbnRUb3RhbCJdKSwNCiAgICAuLi5tYXBTdGF0ZSgiY3VzdG9tZXIiLCBbImN1c3RvbWVyIl0pLA0KICAgIGNvbW1lbnRMaXN0KCl7DQogICAgICByZXR1cm4gdGhpcy5jb21tZW50cw0KICAgIH0NCiAgfSwNCiAgYXN5bmMgbW91bnRlZCgpIHsNCiAgICBjb25zdCBtZSA9IHRoaXM7DQogICAgbWUuJGNvbW1vbkZuLnNob3dNYXJrKCJjb21tZW50LWNvbnRhaW5lciIpDQoNCiAgICBhd2FpdCBtZS5nZXRDb21tZW50T2ZQcm9kdWN0KDEpOw0KICAgIG1lLiRwcm9kdWN0SHViLiRvbigiY29tbWVudC1hZGRlZC10by1wcm9kdWN0IiwgbWUub25Db21tZW50QWRkZWRUb1Byb2R1Y3QpOw0KICAgICAgICAgICAgbWUuJGNvbW1vbkZuLmhpZGVNYXJrKCJjb21tZW50LWNvbnRhaW5lciIpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAuLi5tYXBBY3Rpb25zKCJjb21tZW50IiwgWw0KICAgICAgImdldENvbW1lbnRCeVByb2R1Y3RJRCIsDQogICAgICAiaW5zZXJ0Q29tbWVudE9mUHJvZHVjdCIsDQogICAgXSksDQogICAgLi4ubWFwQWN0aW9ucygiY3VzdG9tZXIiLCBbImdldEN1c3RvbWVyQnlQaG9uZU51bWJlciIsICJpbnNlcnRDdXN0b21lciJdKSwNCiAgICAuLi5tYXBNdXRhdGlvbnMoImNvbW1lbnQiLCBbInNldENvbnRlbnRDb21tZW50Iiwic2V0Q29tbWVudHMiXSksDQogICAgLy9zZXQgYXZhdGFyIGLDrG5oIGx14bqtbiBjaG8gbmfGsOG7nWkgZMO5bmcNCiAgICBuYW1lQXZhdGFyKG5hbWUpIHsNCiAgICAgIHJldHVybiB0aGlzLiRjb21tb25Gbi50YWtlVGhlRmlyc3RMZXR0ZXIobmFtZSk7DQogICAgfSwNCiAgICANCiAgICAvKioNCiAgICAgKiBsxrB1IGLDrG5oIGx14bqtbg0KICAgICAqLw0KICAgIGFzeW5jIHNhdmVDb21tZW50KG1vZGVsRm9ybSkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgYXdhaXQgbWUuZ2V0Q3VzdG9tZXJCeVBob25lTnVtYmVyKHsgcGhvbmVOdW1iZXI6IG1vZGVsRm9ybS5QaG9uZU51bWJlciB9KTsNCiAgICAgIGlmICghbWUuY3VzdG9tZXIpIHsNCiAgICAgICAgY29uc3QgcGFyYW1DdXN0b21lciA9IHsNCiAgICAgICAgICBDdXN0b21lck5hbWU6IG1vZGVsRm9ybS5GdWxsTmFtZSwNCiAgICAgICAgICBFbWFpbDogbW9kZWxGb3JtLkVtYWlsLA0KICAgICAgICAgIFBob25lTnVtYmVyOiBtb2RlbEZvcm0uUGhvbmVOdW1iZXIsDQogICAgICAgIH07DQogICAgICAgIGF3YWl0IG1lDQogICAgICAgICAgLmluc2VydEN1c3RvbWVyKHBhcmFtQ3VzdG9tZXIpDQogICAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gew0KICAgICAgICAgICAgDQogICAgICAgICAgICBhd2FpdCBtZS5nZXRDdXN0b21lckJ5UGhvbmVOdW1iZXIoeyBwaG9uZU51bWJlcjogbW9kZWxGb3JtLlBob25lTnVtYmVyIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goKGUpID0+IHsNCiAgICAgICAgICAgIGNvbnN0IGggPSB0aGlzLiRjcmVhdGVFbGVtZW50Ow0KDQogICAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3Ioew0KICAgICAgICAgICAgICB0aXRsZTogbWUuJHQoIk5vdGlmeS5FcnJvciIpLA0KICAgICAgICAgICAgICBtZXNzYWdlOiBoKA0KICAgICAgICAgICAgICAgICJpIiwNCiAgICAgICAgICAgICAgICB7IHN0eWxlOiAiY29sb3I6IHRlYWwiIH0sDQogICAgICAgICAgICAgICAgbWUuJHQoIk5vdGlmeS5IYXNFcnJvciIpDQogICAgICAgICAgICAgICksDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIGNvbnN0IHBhcmFtQ29tbWVudCA9IHsNCiAgICAgICAgUHJvZHVjdEF0dHJpYnV0ZUlEOiBtZS5wcm9kdWN0LlByb2R1Y3RBdHRyaWJ1dGVJRCwNCiAgICAgICAgQ3VzdG9tZXJJRDogbWUuY3VzdG9tZXIuQ3VzdG9tZXJJRCwNCiAgICAgICAgDQogICAgICAgIFBhcmVudENvbW1lbnRJRDptZS5jb21tZW50U2VsZWN0ZWRSZXBseT9tZS5jb21tZW50U2VsZWN0ZWRSZXBseTp1bmRlZmluZWQNCiAgICAgIH07DQogICAgICBpZihtZS5jb21tZW50U2VsZWN0ZWRSZXBseSE9PScnKXsNCiAgICAgICAgcGFyYW1Db21tZW50LkNvbnRlbnQ9IG1lLnJlcGx5Q29udGVudA0KICAgICAgfWVsc2V7DQogICAgICAgIHBhcmFtQ29tbWVudC5Db250ZW50PSBtZS5jb21tZW50Q29udGVudA0KICAgICAgfQ0KICAgICAgY29uc3QgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7DQogICAgICBhd2FpdCBtZQ0KICAgICAgICAuaW5zZXJ0Q29tbWVudE9mUHJvZHVjdChwYXJhbUNvbW1lbnQpDQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsNCiAgICAgICAgICBtZS4kY29tbW9uRm4uc2hvd01hcmsoImNvbW1lbnQtY29udGFpbmVyIikNCiAgICAgICAgICAgIG1lLm1vZGVsRm9ybT17fQ0KICAgICAgICAgICAgbWUuY29tbWVudENvbnRlbnQ9JycNCiAgICAgICAgICAgIG1lLnJlcGx5Q29udGVudD0nJw0KICAgICAgICAgICAgbWUuY29tbWVudFNlbGVjdGVkUmVwbHk9JycNCg0KICAgIC8vYXdhaXQgbWUuZ2V0Q29tbWVudE9mUHJvZHVjdCgxKTsNCg0KICAgICAgICAgICAgbWUuJGNvbW1vbkZuLmhpZGVNYXJrKCJjb21tZW50LWNvbnRhaW5lciIpDQogICAgICAgICAgdGhpcy4kbm90aWZ5KHsNCiAgICAgICAgICAgIHRpdGxlOiBtZS4kdCgiTm90aWZ5LlN1Y2Nlc3MiKSwNCiAgICAgICAgICAgIG1lc3NhZ2U6IGgoDQogICAgICAgICAgICAgICJpIiwNCiAgICAgICAgICAgICAgeyBzdHlsZTogImNvbG9yOiB0ZWFsIiB9LA0KICAgICAgICAgICAgICBtZS4kdCgiTm90aWZ5Lkluc2VydFN1Y2Nlc3MiLCB7IG9iamVjdDogImLDrG5oIGx14bqtbiIgfSkNCiAgICAgICAgICAgICksDQogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgfSk7DQogICAgICAgIH0pDQogICAgICAgIC5jYXRjaCgoZSkgPT4gew0KICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7DQogICAgICAgICAgICB0aXRsZTogbWUuJHQoIk5vdGlmeS5FcnJvciIpLA0KICAgICAgICAgICAgbWVzc2FnZTogaCgiaSIsIHsgc3R5bGU6ICJjb2xvcjogdGVhbCIgfSwgbWUuJHQoIk5vdGlmeS5IYXNFcnJvciIpKSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiBM4bqleSBkYW5oIHPDoWNoIGLDrG5oIGx14bqtbiBj4bunYSBz4bqjbiBwaOG6qW0NCiAgICAgKi8NCiAgICBnZXRDb21tZW50T2ZQcm9kdWN0KHBhZ2VJbmRleCkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgY29uc3QgcGFyYW1zID0gew0KICAgICAgICBwcm9kdWN0QXR0cmlidXRlSUQ6IG1lLnByb2R1Y3QuUHJvZHVjdEF0dHJpYnV0ZUlELA0KICAgICAgICBwYWdlaW5kZXg6IHBhZ2VJbmRleCwNCiAgICAgICAgcGFnZVNpemU6IG1lLnBhZ2VTaXplLA0KICAgICAgfTsNCiAgICAgIG1lLmdldENvbW1lbnRCeVByb2R1Y3RJRChwYXJhbXMpOw0KICAgIH0sDQogICAgLyoqDQogICAgICogR+G7rWkgYsOsbmggbHXhuq1uDQogICAgICovDQogICAgb25TZW5kQ29tbWVudCgpIHsNCiAgICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICAgIGlmIChtZS5jb21tZW50Q29udGVudC5sZW5ndGggPCAzKSB7DQogICAgICAgIG1lLnNob3dDb21tZW50RXJyb3IgPSB0cnVlOw0KICAgICAgfQ0KICAgICAgaWYgKCFtZS5zaG93Q29tbWVudEVycm9yKSB7DQogICAgICAgIG1lLnNldENvbnRlbnRDb21tZW50KG1lLmNvbnRlbnQpOw0KICAgICAgICBtZS4kcmVmcy5wb3B1cC5zZXRNb2RlbCh0cnVlKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIG9uU2VuZFJlcGx5KCkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgaWYgKG1lLnJlcGx5Q29udGVudC5sZW5ndGggPCAzKSB7DQogICAgICAgIG1lLnNob3dSZXBseUVycm9yID0gdHJ1ZTsNCiAgICAgIH0NCiAgICAgIGlmICghbWUuc2hvd1JlcGx5RXJyb3IpIHsNCiAgICAgICAgbWUuc2V0Q29udGVudENvbW1lbnQobWUuY29udGVudCk7DQogICAgICAgIG1lLiRyZWZzLnBvcHVwLnNldE1vZGVsKHRydWUpOw0KICAgICAgfQ0KICAgIH0sDQogICAgcmVwbHlDb21tZW50KGNvbW1lbnRJRCkgew0KICAgICAgY29uc3QgbWU9dGhpcw0KICAgICAgbWUuY29tbWVudFNlbGVjdGVkUmVwbHkgPSBjb21tZW50SUQ7DQogICAgfSwNCiAgICBvblNob3dSZXBseShjb21tZW50SUQpIHsNCiAgICAgIGNvbnN0IG1lPXRoaXMNCiAgICAgIGlmKG1lLnNob3dSZXBseSAhPT0gY29tbWVudElEKXsNCg0KICAgICAgICBtZS5zaG93UmVwbHkgPSBjb21tZW50SUQ7DQogICAgICB9ZWxzZXsNCiAgICAgICAgbWUuc2hvd1JlcGx5PScnDQogICAgICB9DQogICAgfSwNCiAgICBvbkNvbW1lbnRBZGRlZFRvUHJvZHVjdChjb21tZW50KXsNCiAgICAgIGNvbnN0IG1lPXRoaXMNCiAgICAgIGlmKG1lLnByb2R1Y3QuUHJvZHVjdEF0dHJpYnV0ZUlEPT09Y29tbWVudFswXS5Db21tZW50LlByb2R1Y3RBdHRyaWJ1dGVJRCl7DQogICAgICAgIGNvbnN0IGRhdGFOb3RQYXJlbnQ9Y29tbWVudC5maWx0ZXIoaXRlbT0+ew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWl0ZW0uQ29tbWVudC5QYXJlbnRDb21tZW50SUQNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFIYXNQYXJlbnQ9Y29tbWVudC5maWx0ZXIoaXRlbT0+ew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5Db21tZW50LlBhcmVudENvbW1lbnRJRA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgY29uc3QgZGF0YUZpbmFsPWRhdGFOb3RQYXJlbnQubWFwKGl0ZW09PnsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRDb21tZW50PWRhdGFIYXNQYXJlbnQuZmlsdGVyKGNoaWxkPT57DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQuQ29tbWVudC5QYXJlbnRDb21tZW50SUQ9PT1pdGVtLkNvbW1lbnQuQ29tbWVudElEDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIGl0ZW0uQ29tbWVudC5DaGlsZENvbW1lbnQ9Y2hpbGRDb21tZW50DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgbWUuc2V0Q29tbWVudHMoZGF0YUZpbmFsKQ0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICBjb25zdCBtZT10aGlzDQogICAgICAvLyBNYWtlIHN1cmUgdG8gY2xlYW51cCBTaWduYWxSIGV2ZW50IGhhbmRsZXJzIHdoZW4gcmVtb3ZpbmcgdGhlIGNvbXBvbmVudA0KICAgICAgbWUuJHByb2R1Y3RIdWIuJG9mZigiY29tbWVudC1hZGRlZC10by1wcm9kdWN0IiwgbWUub25Db21tZW50QWRkZWRUb1Byb2R1Y3QpOw0KICAgICAgDQogICAgfSwNCiAgd2F0Y2g6IHsNCiAgICBjb21tZW50Q29udGVudChuZXdWYWwpIHsNCiAgICAgIGNvbnN0IG1lID0gdGhpczsNCiAgICAgIGlmIChuZXdWYWwubGVuZ3RoID49IDMpIHsNCiAgICAgICAgbWUuc2hvd0NvbW1lbnRFcnJvciA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQogICAgcmVwbHlDb250ZW50KG5ld1ZhbCkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgaWYgKG5ld1ZhbC5sZW5ndGggPj0gMykgew0KICAgICAgICBtZS5zaG93UmVwbHlFcnJvciA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgcGFnZUluZGV4KCkgew0KICAgICAgY29uc3QgbWUgPSB0aGlzOw0KICAgICAgbWUuJGNvbW1vbkZuLnNob3dNYXJrKCJjb21tZW50LWNvbnRhaW5lciIpDQoNCiAgICBhd2FpdCBtZS5nZXRDb21tZW50T2ZQcm9kdWN0KG1lLnBhZ2VJbmRleCk7DQogICAgICAgICAgICBtZS4kY29tbW9uRm4uaGlkZU1hcmsoImNvbW1lbnQtY29udGFpbmVyIikNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"comment.vue","sourceRoot":"src/components/client/views/product-detail/comment","sourcesContent":["<template>\r\n  <div class=\"comment-container tw-mt-4\">\r\n    <area-card :title=\"$t('DetailProduct.Comment', { number: commentTotal })\">\r\n      <div class=\"comment-area tw-relative\">\r\n        <el-input\r\n          type=\"textarea\"\r\n          :autosize=\"{ minRows: 3 }\"\r\n          :placeholder=\"$t('DetailProduct.WriteComment')\"\r\n          v-model=\"commentContent\"\r\n        >\r\n        </el-input>\r\n        <v-btn @click=\"onSendComment\" class=\"send-btn\">{{\r\n          $t(\"Button.Comment\")\r\n        }}</v-btn>\r\n        <span class=\"text-error\" v-if=\"showCommentError\"\r\n          >Mời viết bình luận (tối thiểu 3 kí tự)</span\r\n        >\r\n      </div>\r\n      <!-- Danh sách đánh giá của khách hàng -->\r\n      <div class=\"comment-result tw-mt-6\">\r\n        <div class=\"comment-list\">\r\n          <div\r\n            class=\"comment-item\"\r\n            v-for=\"(item,index) in commentList\"\r\n            :key=\"index\"\r\n          >\r\n            <div class=\"parent-comment tw-flex tw-mb-4\">\r\n              <div class=\"avatar-area tw-w-16 tw-h-16 tw-mr-4\">\r\n                <el-avatar shape=\"square\">\r\n                  {{ nameAvatar(item.CustomerName?item.CustomerName:item.AccountName) }}\r\n                </el-avatar>\r\n              </div>\r\n              <div class=\"comment-info tw-flex-1\">\r\n                <div class=\"user-name tw-font-semibold\">\r\n                  {{ item.CustomerName }}\r\n                </div>\r\n                <div class=\"comment-time tw-text-xs tw-text-gray-400\">\r\n                  {{$commonFn.setCommentTime(item.Comment.CreatedDate)}}\r\n                </div>\r\n                <div class=\"content\">\r\n                  {{ item.Comment.Content }}\r\n                </div>\r\n                <div\r\n                  class=\"\r\n                    content\r\n                    tw-text-xs\r\n                    mt-2\r\n                    tw-cursor-pointer tw-text-blue-400\r\n                    tw-flex\r\n                  \"\r\n                  \r\n                >\r\n                <div class=\"reply\" @click=\"replyComment(item.Comment.CommentID)\">\r\n\r\n                  Trả lời\r\n                </div>\r\n                <div class=\"show-reply tw-ml-6\" @click=\"onShowReply(item.Comment.CommentID)\" v-if=\"item.Comment.ChildComment.length>0\">\r\n                  {{showReply===item.Comment.CommentID?\"Ẩn bình luận\":\"Hiện bình luận\"}}\r\n                </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"comment-reply-area tw-relative tw-ml-10 tw-mb-4\"\r\n              v-if=\"commentSelectedReply===item.Comment.CommentID\"\r\n            >\r\n              <el-input\r\n                type=\"textarea\"\r\n                :autosize=\"{ minRows: 3 }\"\r\n                :placeholder=\"$t('DetailProduct.WriteComment')\"\r\n                v-model=\"replyContent\"\r\n              >\r\n              </el-input>\r\n              <v-btn @click=\"onSendReply\" class=\"send-btn\">{{\r\n                $t(\"Button.Comment\")\r\n              }}</v-btn>\r\n              <span class=\"text-error\" v-if=\"showReplyError\"\r\n                >Mời viết bình luận (tối thiểu 3 kí tự)</span\r\n              >\r\n            </div>\r\n            <div class=\"child-comment\"\r\n            v-if=\"showReply===item.Comment.CommentID\"\r\n            >\r\n\r\n              <div\r\n                class=\" child-item tw-flex tw-ml-10 tw-mb-4\"\r\n                v-for=\"child in item.Comment.ChildComment\"\r\n                :key=\"child.Comment.CategoryID\"\r\n              >\r\n                <div class=\"avatar-area tw-w-16 tw-h-16 tw-mr-4\">\r\n                  <el-avatar shape=\"square\">\r\n                    {{ nameAvatar(child.CustomerName?child.CustomerName:child.AccountName) }}\r\n                  </el-avatar>\r\n                </div>\r\n                <div class=\"comment-info tw-flex-1\">\r\n                  <div class=\"user-name tw-font-semibold\">\r\n                    {{ child.CustomerName?child.CustomerName:(child.AccountName+\" (Admin)\") }}\r\n                  </div>\r\n                  <div class=\"comment-time tw-text-xs tw-text-gray-400\">\r\n                    {{$commonFn.setCommentTime(child.Comment.CreatedDate)}}\r\n                  </div>\r\n                  <div class=\"content\">\r\n                    {{ child.Comment.Content }}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"panigation\">\r\n          <v-pagination\r\n            v-if=\"pageTotal > 1\"\r\n            v-model=\"pageIndex\"\r\n            :length=\"pageTotal\"\r\n            :total-visible=\"7\"\r\n          ></v-pagination>\r\n        </div>\r\n      </div>\r\n    </area-card>\r\n    <CommentCustomerInfoPopup\r\n      ref=\"popup\"\r\n      @saveComment=\"saveComment\"\r\n      title=\"Hoàn thành gửi bình luận\"\r\n      :content=\"commentContent\"\r\n      :type=\"$enumeration.CustomerInfoPopup.Comment\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AreaCard from \"@/components/controls/area-card\";\r\nimport CommentCustomerInfoPopup from \"../popup/customer-info-popup.vue\";\r\nimport { mapState, mapActions, mapMutations } from \"vuex\";\r\nexport default {\r\n  components: {\r\n    AreaCard,\r\n    CommentCustomerInfoPopup,\r\n  },\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      commentContent: \"\",\r\n      replyContent: \"\",\r\n      showCommentError: false,\r\n      showReplyError: false,\r\n      showReply: '',\r\n      pageIndex: 1,\r\n      pageSize: 5,\r\n      commentSelectedReply: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(\"comment\", [\"comments\", \"pageTotal\", \"commentTotal\"]),\r\n    ...mapState(\"customer\", [\"customer\"]),\r\n    commentList(){\r\n      return this.comments\r\n    }\r\n  },\r\n  async mounted() {\r\n    const me = this;\r\n    me.$commonFn.showMark(\"comment-container\")\r\n\r\n    await me.getCommentOfProduct(1);\r\n    me.$productHub.$on(\"comment-added-to-product\", me.onCommentAddedToProduct);\r\n            me.$commonFn.hideMark(\"comment-container\")\r\n  },\r\n  methods: {\r\n    ...mapActions(\"comment\", [\r\n      \"getCommentByProductID\",\r\n      \"insertCommentOfProduct\",\r\n    ]),\r\n    ...mapActions(\"customer\", [\"getCustomerByPhoneNumber\", \"insertCustomer\"]),\r\n    ...mapMutations(\"comment\", [\"setContentComment\",\"setComments\"]),\r\n    //set avatar bình luận cho người dùng\r\n    nameAvatar(name) {\r\n      return this.$commonFn.takeTheFirstLetter(name);\r\n    },\r\n    \r\n    /**\r\n     * lưu bình luận\r\n     */\r\n    async saveComment(modelForm) {\r\n      const me = this;\r\n      await me.getCustomerByPhoneNumber({ phoneNumber: modelForm.PhoneNumber });\r\n      if (!me.customer) {\r\n        const paramCustomer = {\r\n          CustomerName: modelForm.FullName,\r\n          Email: modelForm.Email,\r\n          PhoneNumber: modelForm.PhoneNumber,\r\n        };\r\n        await me\r\n          .insertCustomer(paramCustomer)\r\n          .then(async (res) => {\r\n            \r\n            await me.getCustomerByPhoneNumber({ phoneNumber: modelForm.PhoneNumber });\r\n            \r\n          })\r\n          .catch((e) => {\r\n            const h = this.$createElement;\r\n\r\n            this.$notify.error({\r\n              title: me.$t(\"Notify.Error\"),\r\n              message: h(\r\n                \"i\",\r\n                { style: \"color: teal\" },\r\n                me.$t(\"Notify.HasError\")\r\n              ),\r\n            });\r\n          });\r\n      }\r\n      const paramComment = {\r\n        ProductAttributeID: me.product.ProductAttributeID,\r\n        CustomerID: me.customer.CustomerID,\r\n        \r\n        ParentCommentID:me.commentSelectedReply?me.commentSelectedReply:undefined\r\n      };\r\n      if(me.commentSelectedReply!==''){\r\n        paramComment.Content= me.replyContent\r\n      }else{\r\n        paramComment.Content= me.commentContent\r\n      }\r\n      const h = this.$createElement;\r\n      await me\r\n        .insertCommentOfProduct(paramComment)\r\n        .then(async (res) => {\r\n          me.$commonFn.showMark(\"comment-container\")\r\n            me.modelForm={}\r\n            me.commentContent=''\r\n            me.replyContent=''\r\n            me.commentSelectedReply=''\r\n\r\n    //await me.getCommentOfProduct(1);\r\n\r\n            me.$commonFn.hideMark(\"comment-container\")\r\n          this.$notify({\r\n            title: me.$t(\"Notify.Success\"),\r\n            message: h(\r\n              \"i\",\r\n              { style: \"color: teal\" },\r\n              me.$t(\"Notify.InsertSuccess\", { object: \"bình luận\" })\r\n            ),\r\n            type: \"success\",\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          this.$notify.error({\r\n            title: me.$t(\"Notify.Error\"),\r\n            message: h(\"i\", { style: \"color: teal\" }, me.$t(\"Notify.HasError\")),\r\n          });\r\n        });\r\n    },\r\n    /**\r\n     * Lấy danh sách bình luận của sản phẩm\r\n     */\r\n    getCommentOfProduct(pageIndex) {\r\n      const me = this;\r\n      const params = {\r\n        productAttributeID: me.product.ProductAttributeID,\r\n        pageindex: pageIndex,\r\n        pageSize: me.pageSize,\r\n      };\r\n      me.getCommentByProductID(params);\r\n    },\r\n    /**\r\n     * Gửi bình luận\r\n     */\r\n    onSendComment() {\r\n      const me = this;\r\n      if (me.commentContent.length < 3) {\r\n        me.showCommentError = true;\r\n      }\r\n      if (!me.showCommentError) {\r\n        me.setContentComment(me.content);\r\n        me.$refs.popup.setModel(true);\r\n      }\r\n    },\r\n    onSendReply() {\r\n      const me = this;\r\n      if (me.replyContent.length < 3) {\r\n        me.showReplyError = true;\r\n      }\r\n      if (!me.showReplyError) {\r\n        me.setContentComment(me.content);\r\n        me.$refs.popup.setModel(true);\r\n      }\r\n    },\r\n    replyComment(commentID) {\r\n      const me=this\r\n      me.commentSelectedReply = commentID;\r\n    },\r\n    onShowReply(commentID) {\r\n      const me=this\r\n      if(me.showReply !== commentID){\r\n\r\n        me.showReply = commentID;\r\n      }else{\r\n        me.showReply=''\r\n      }\r\n    },\r\n    onCommentAddedToProduct(comment){\r\n      const me=this\r\n      if(me.product.ProductAttributeID===comment[0].Comment.ProductAttributeID){\r\n        const dataNotParent=comment.filter(item=>{\r\n                    return !item.Comment.ParentCommentID\r\n                })\r\n                const dataHasParent=comment.filter(item=>{\r\n                    return item.Comment.ParentCommentID\r\n                })\r\n                const dataFinal=dataNotParent.map(item=>{\r\n                    const childComment=dataHasParent.filter(child=>{\r\n                        return child.Comment.ParentCommentID===item.Comment.CommentID\r\n                    })\r\n                    item.Comment.ChildComment=childComment\r\n                    return item\r\n                })\r\n        me.setComments(dataFinal)\r\n      }\r\n    }\r\n    \r\n  },\r\n  beforeDestroy() {\r\n    const me=this\r\n      // Make sure to cleanup SignalR event handlers when removing the component\r\n      me.$productHub.$off(\"comment-added-to-product\", me.onCommentAddedToProduct);\r\n      \r\n    },\r\n  watch: {\r\n    commentContent(newVal) {\r\n      const me = this;\r\n      if (newVal.length >= 3) {\r\n        me.showCommentError = false;\r\n      }\r\n    },\r\n    replyContent(newVal) {\r\n      const me = this;\r\n      if (newVal.length >= 3) {\r\n        me.showReplyError = false;\r\n      }\r\n    },\r\n    async pageIndex() {\r\n      const me = this;\r\n      me.$commonFn.showMark(\"comment-container\")\r\n\r\n    await me.getCommentOfProduct(me.pageIndex);\r\n            me.$commonFn.hideMark(\"comment-container\")\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.send-btn {\r\n  @apply tw-bg-red-500 tw-text-white tw-absolute tw-right-4 tw-top-4 !important;\r\n}\r\n</style>\r\n<style lang=\"scss\" scoped>\r\n.comment-container {\r\n  .comment-area {\r\n    .text-error {\r\n      color: red;\r\n      font-size: 13px;\r\n    }\r\n  }\r\n  .comment-result {\r\n    .comment-list {\r\n      .comment-item {\r\n        .child-item{\r\n          border-left:4px solid rgb(132, 129, 129);\r\n          padding-left:12px;\r\n        }\r\n        .avatar-area {\r\n          .el-avatar {\r\n            height: 100%;\r\n            width: 100%;\r\n            line-height: 64px;\r\n            font-size: 20px;\r\n          }\r\n        }\r\n        .comment-info {\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}