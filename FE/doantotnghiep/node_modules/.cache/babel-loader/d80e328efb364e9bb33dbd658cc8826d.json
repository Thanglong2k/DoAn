{"remainingRequest":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\babel-loader\\lib\\index.js!E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\scripts\\comment-hub.js","dependencies":[{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\src\\scripts\\comment-hub.js","mtime":1655999299780},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\babel.config.js","mtime":1641193952525},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Nam4\\Ki2\\DoAnTotNghiep\\FE\\doantotnghiep\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IEh1YkNvbm5lY3Rpb25CdWlsZGVyLCBMb2dMZXZlbCB9IGZyb20gJ0Bhc3BuZXQvc2lnbmFscic7CmV4cG9ydCBkZWZhdWx0IHsKICBpbnN0YWxsOiBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSkgewogICAgdmFyIGNvbm5lY3Rpb24gPSBuZXcgSHViQ29ubmVjdGlvbkJ1aWxkZXIoKS53aXRoVXJsKCJodHRwczovL2xvY2FsaG9zdDo0NDM2MS9jb21tZW50SHViIikuY29uZmlndXJlTG9nZ2luZyhMb2dMZXZlbC5JbmZvcm1hdGlvbikuYnVpbGQoKTsgLy8gdXNlIG5ldyBWdWUgaW5zdGFuY2UgYXMgYW4gZXZlbnQgYnVzCgogICAgdmFyIHByb2R1Y3RIdWIgPSBuZXcgVnVlKCk7IC8vIGV2ZXJ5IGNvbXBvbmVudCB3aWxsIHVzZSB0aGlzLiRxdWVzdGlvbkh1YiB0byBhY2Nlc3MgdGhlIGV2ZW50IGJ1cwoKICAgIFZ1ZS5wcm90b3R5cGUuJHByb2R1Y3RIdWIgPSBwcm9kdWN0SHViOyAvLyBGb3J3YXJkIHNlcnZlciBzaWRlIFNpZ25hbFIgZXZlbnRzIHRocm91Z2ggJHF1ZXN0aW9uSHViLCB3aGVyZSBjb21wb25lbnRzIHdpbGwgbGlzdGVuIHRvIHRoZW0KCiAgICBjb25uZWN0aW9uLm9uKCdOZXdDb21tZW50QWRkZWRUb1Byb2R1Y3QnLCBmdW5jdGlvbiAoY29tbWVudCkgewogICAgICBkZWJ1Z2dlcjsKICAgICAgcHJvZHVjdEh1Yi4kZW1pdCgnY29tbWVudC1hZGRlZC10by1wcm9kdWN0JywgY29tbWVudCk7CiAgICB9KTsKICAgIGNvbm5lY3Rpb24ub24oJ05ld0NvbW1lbnRBZGRlZFRvQWRtaW4nLCBmdW5jdGlvbiAoY29tbWVudCkgewogICAgICBkZWJ1Z2dlcjsKICAgICAgcHJvZHVjdEh1Yi4kZW1pdCgnY29tbWVudC1hZGRlZC10by1hZG1pbicsIGNvbW1lbnQpOwogICAgfSk7CiAgICB2YXIgc3RhcnRlZFByb21pc2UgPSBudWxsOwoKICAgIGZ1bmN0aW9uIHN0YXJ0KCkgewogICAgICBzdGFydGVkUHJvbWlzZSA9IGNvbm5lY3Rpb24uc3RhcnQoKS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNvbm5lY3Qgd2l0aCBodWInLCBlcnIpOwogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBzdGFydCgpLnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTsKICAgICAgICAgIH0sIDUwMDApOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIHN0YXJ0ZWRQcm9taXNlOwogICAgfQoKICAgIGNvbm5lY3Rpb24ub25jbG9zZShmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdGFydCgpOwogICAgfSk7CiAgICBzdGFydCgpOwogIH0KfTs="},{"version":3,"sources":["E:/Nam4/Ki2/DoAnTotNghiep/FE/doantotnghiep/src/scripts/comment-hub.js"],"names":["HubConnectionBuilder","LogLevel","install","Vue","connection","withUrl","configureLogging","Information","build","productHub","prototype","$productHub","on","comment","$emit","startedPromise","start","catch","err","console","error","Promise","resolve","reject","setTimeout","then","onclose"],"mappings":";AAAA,SAASA,oBAAT,EAA+BC,QAA/B,QAA+C,iBAA/C;AAEA,eAAe;AACXC,EAAAA,OADW,mBACHC,GADG,EACE;AACT,QAAMC,UAAU,GAAG,IAAIJ,oBAAJ,GACdK,OADc,uCAEdC,gBAFc,CAEGL,QAAQ,CAACM,WAFZ,EAGdC,KAHc,EAAnB,CADS,CAKT;;AACA,QAAMC,UAAU,GAAG,IAAIN,GAAJ,EAAnB,CANS,CAQT;;AACAA,IAAAA,GAAG,CAACO,SAAJ,CAAcC,WAAd,GAA4BF,UAA5B,CATS,CAWT;;AAGAL,IAAAA,UAAU,CAACQ,EAAX,CAAc,0BAAd,EAA0C,UAACC,OAAD,EAAa;AACnD;AACAJ,MAAAA,UAAU,CAACK,KAAX,CAAiB,0BAAjB,EAA6CD,OAA7C;AACH,KAHD;AAIAT,IAAAA,UAAU,CAACQ,EAAX,CAAc,wBAAd,EAAwC,UAACC,OAAD,EAAa;AACjD;AACAJ,MAAAA,UAAU,CAACK,KAAX,CAAiB,wBAAjB,EAA2CD,OAA3C;AACH,KAHD;AAKA,QAAIE,cAAc,GAAG,IAArB;;AAEA,aAASC,KAAT,GAAiB;AACbD,MAAAA,cAAc,GAAGX,UAAU,CAACY,KAAX,GAAmBC,KAAnB,CAAyB,UAAAC,GAAG,EAAI;AAC7CC,QAAAA,OAAO,CAACC,KAAR,CAAc,4BAAd,EAA4CF,GAA5C;AACA,eAAO,IAAIG,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV;AAAA,iBAAqBC,UAAU,CAAC;AAAA,mBAAMR,KAAK,GAAGS,IAAR,CAAaH,OAAb,EAAsBL,KAAtB,CAA4BM,MAA5B,CAAN;AAAA,WAAD,EAA4C,IAA5C,CAA/B;AAAA,SAAZ,CAAP;AACH,OAHgB,CAAjB;AAIA,aAAOR,cAAP;AACH;;AACDX,IAAAA,UAAU,CAACsB,OAAX,CAAmB;AAAA,aAAMV,KAAK,EAAX;AAAA,KAAnB;AAEAA,IAAAA,KAAK;AACR;AApCU,CAAf","sourcesContent":["import { HubConnectionBuilder, LogLevel } from '@aspnet/signalr'\r\n\r\nexport default {\r\n    install(Vue) {\r\n        const connection = new HubConnectionBuilder()\r\n            .withUrl(`https://localhost:44361/commentHub`)\r\n            .configureLogging(LogLevel.Information)\r\n            .build()\r\n        // use new Vue instance as an event bus\r\n        const productHub = new Vue()\r\n\r\n        // every component will use this.$questionHub to access the event bus\r\n        Vue.prototype.$productHub = productHub\r\n\r\n        // Forward server side SignalR events through $questionHub, where components will listen to them\r\n\r\n\r\n        connection.on('NewCommentAddedToProduct', (comment) => {\r\n            debugger\r\n            productHub.$emit('comment-added-to-product', comment)\r\n        })\r\n        connection.on('NewCommentAddedToAdmin', (comment) => {\r\n            debugger\r\n            productHub.$emit('comment-added-to-admin', comment)\r\n        })\r\n\r\n        let startedPromise = null\r\n\r\n        function start() {\r\n            startedPromise = connection.start().catch(err => {\r\n                console.error('Failed to connect with hub', err)\r\n                return new Promise((resolve, reject) => setTimeout(() => start().then(resolve).catch(reject), 5000))\r\n            })\r\n            return startedPromise\r\n        }\r\n        connection.onclose(() => start())\r\n\r\n        start()\r\n    }\r\n}"]}]}